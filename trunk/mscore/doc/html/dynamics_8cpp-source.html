<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: dynamics.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>dynamics.cpp</h1><a href="dynamics_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MuseScore</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: dynamics.cpp,v 1.13 2005/06/20 13:54:53 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2002-2004 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#include "<a class="code" href="dynamics_8h.html">dynamics.h</a>"</span>
00010 <span class="preprocessor">#include "<a class="code" href="xml_8h.html">xml.h</a>"</span>
00011 <span class="preprocessor">#include "<a class="code" href="project_8h.html">project.h</a>"</span>
00012 <span class="preprocessor">#include "<a class="code" href="measure_8h.html">measure.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="system_8h.html">system.h</a>"</span>
00014 <span class="preprocessor">#include "<a class="code" href="segment_8h.html">segment.h</a>"</span>
00015 <span class="preprocessor">#include "<a class="code" href="utils_8h.html">utils.h</a>"</span>
00016 <span class="preprocessor">#include "<a class="code" href="style_8h.html">style.h</a>"</span>
00017 
<a name="l00018"></a><a class="code" href="dynamics_8cpp.html#a0">00018</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a0">pp</a>[]     = { 0xe070, 0xe070, 0xe070, 0xe070, 0xe070, 0xe070};
<a name="l00019"></a><a class="code" href="dynamics_8cpp.html#a1">00019</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a1">mp</a>[]     = { 0xe06d, 0xe070 };               <span class="comment">// mp</span>
<a name="l00020"></a><a class="code" href="dynamics_8cpp.html#a2">00020</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a2">mf</a>[]     = { 0xe06d, 0xe066 };               <span class="comment">// mf</span>
<a name="l00021"></a><a class="code" href="dynamics_8cpp.html#a3">00021</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a3">ff</a>[]     = { 0xe066, 0xe066, 0xe066, 0xe066, 0xe066, 0xe066};
<a name="l00022"></a><a class="code" href="dynamics_8cpp.html#a4">00022</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a4">fp</a>[]     = { 0xe066, 0xe070 };               <span class="comment">// fp</span>
<a name="l00023"></a><a class="code" href="dynamics_8cpp.html#a5">00023</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a5">sfz</a>[]    = { 0xe073, 0xe066, 0xe07a };       <span class="comment">// sfz</span>
<a name="l00024"></a><a class="code" href="dynamics_8cpp.html#a6">00024</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a6">sffz</a>[]   = { 0xe073, 0xe066, 0xe066, 0xe07a };   <span class="comment">// sffz</span>
<a name="l00025"></a><a class="code" href="dynamics_8cpp.html#a7">00025</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a7">sfp</a>[]    = { 0xe073, 0xe066, 0xe070, 0xe070};    <span class="comment">// sfpp</span>
<a name="l00026"></a><a class="code" href="dynamics_8cpp.html#a8">00026</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a8">rfz</a>[]    = { 0xe0c4, 0xe066, 0xe07a };       <span class="comment">// rfz</span>
<a name="l00027"></a><a class="code" href="dynamics_8cpp.html#a9">00027</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a9">fz</a>[]     = { 0xe066, 0xe07a };               <span class="comment">// fz</span>
<a name="l00028"></a><a class="code" href="dynamics_8cpp.html#a10">00028</a> <span class="keyword">static</span> <span class="keyword">const</span> QChar <a class="code" href="dynamics_8cpp.html#a10">z</a>[]      = { 0xe07a };                       <span class="comment">// z</span>
00029 
<a name="l00030"></a><a class="code" href="dynamics_8cpp.html#a11">00030</a> <a class="code" href="structDyn.html">Dyn</a> <a class="code" href="dynamics_8cpp.html#a11">dynList</a>[] = {
00031       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a0">DynPPPPPP</a>,   <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"pppppp"</span>, QString(<a class="code" href="dynamics_8cpp.html#a0">pp</a>, 6)),
00032       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a1">DynPPPPP</a>,    <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"ppppp"</span>,  QString(<a class="code" href="dynamics_8cpp.html#a0">pp</a>, 5)),
00033       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a2">DynPPPP</a>,     <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"pppp"</span>,   QString(<a class="code" href="dynamics_8cpp.html#a0">pp</a>, 4)),
00034       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a3">DynPPP</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"ppp"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a0">pp</a>, 3)),
00035       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a4">DynPP</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"pp"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a0">pp</a>, 2)),
00036       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a5">DynP</a>,        <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"p"</span>,      QString(<a class="code" href="dynamics_8cpp.html#a0">pp</a>, 1)),
00037       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a6">DynMP</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"mp"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a1">mp</a>,  2)),
00038       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a7">DynMF</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"mf"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a2">mf</a>,  2)),
00039       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a8">DynF</a>,        <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"f"</span>,      QString(<a class="code" href="dynamics_8cpp.html#a3">ff</a>,  1)),
00040       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a9">DynFF</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"ff"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a3">ff</a>,  2)),
00041       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a10">DynFFF</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"fff"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a3">ff</a>,  3)),
00042       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a11">DynFFFF</a>,     <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"ffff"</span>,   QString(<a class="code" href="dynamics_8cpp.html#a3">ff</a>,  4)),
00043       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a12">DynFFFFF</a>,    <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"fffff"</span>,  QString(<a class="code" href="dynamics_8cpp.html#a3">ff</a>,  5)),
00044       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a13">DynFFFFFF</a>,   <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"ffffff"</span>, QString(<a class="code" href="dynamics_8cpp.html#a3">ff</a>,  6)),
00045       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a14">DynFP</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"fp"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a4">fp</a>,  2)),
00046       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a15">DynSF</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"sf"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a5">sfz</a>, 2)),
00047       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a16">DynSFZ</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"sfz"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a5">sfz</a>, 3)),
00048       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a17">DynSFFZ</a>,     <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"sffz"</span>,   QString(<a class="code" href="dynamics_8cpp.html#a6">sffz</a>, 4)),
00049       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a18">DynSFP</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"sfp"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a7">sfp</a>, 3)),
00050       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a19">DynSFPP</a>,     <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"sfpp"</span>,   QString(<a class="code" href="dynamics_8cpp.html#a7">sfp</a>, 4)),
00051       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a20">DynRFZ</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"rfz"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a8">rfz</a>, 3)),
00052       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a21">DynRF</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"rf"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a8">rfz</a>, 2)),
00053       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a22">DynFZ</a>,       <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"fz"</span>,     QString(<a class="code" href="dynamics_8cpp.html#a9">fz</a>,  2)),
00054       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a23">DynM</a>,        <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"m"</span>,      QString(<a class="code" href="dynamics_8cpp.html#a1">mp</a>,  1)),
00055       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a20">DynRFZ</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"rfz"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a8">rfz</a>, 1)),
00056       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a16">DynSFZ</a>,      <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"sfz"</span>,    QString(<a class="code" href="dynamics_8cpp.html#a5">sfz</a>, 1)),
00057       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a26">DynZ</a>,        <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>,  <span class="stringliteral">"z"</span>,      QString(<a class="code" href="dynamics_8cpp.html#a10">z</a>,   1)),
00058       <a class="code" href="structDyn.html">Dyn</a>(<a class="code" href="dynamics_8h.html#a29a27">DynOTHER</a>,    <a class="code" href="style_8h.html#a45a29">TEXT_STYLE_DYNAMICS</a>, <span class="stringliteral">"other-dynamics"</span>, QString(<span class="stringliteral">""</span>)),
00059       };
00060 
00061 <span class="comment">//---------------------------------------------------------</span>
00062 <span class="comment">//   Dynamic</span>
00063 <span class="comment">//---------------------------------------------------------</span>
00064 
<a name="l00065"></a><a class="code" href="classDynamic.html#a0">00065</a> <a class="code" href="classDynamic.html#a0">Dynamic::Dynamic</a>(<a class="code" href="classScore.html">Score</a>* s)
00066    : <a class="code" href="classSText.html">SText</a>(s, <a class="code" href="element_8h.html#a65a31">DYNAMIC</a>, <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>)
00067       {
00068       <a class="code" href="classDynamic.html#a4">setVal</a>(<a class="code" href="dynamics_8h.html#a29a7">DynMF</a>);
00069       }
00070 
<a name="l00071"></a><a class="code" href="classDynamic.html#a1">00071</a> <a class="code" href="classDynamic.html#a0">Dynamic::Dynamic</a>(<a class="code" href="classScore.html">Score</a>* s, DynVal v)
00072    : <a class="code" href="classSText.html">SText</a>(s, <a class="code" href="element_8h.html#a65a31">DYNAMIC</a>, <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>)
00073       {
00074       <a class="code" href="classDynamic.html#a4">setVal</a>(v);
00075       }
00076 
<a name="l00077"></a><a class="code" href="classDynamic.html#a2">00077</a> <a class="code" href="classDynamic.html#a0">Dynamic::Dynamic</a>(<a class="code" href="classScore.html">Score</a>* s, <span class="keyword">const</span> QString t)
00078    : <a class="code" href="classSText.html">SText</a>(s, <a class="code" href="element_8h.html#a65a31">DYNAMIC</a>, <a class="code" href="style_8h.html#a45a19">TEXT_STYLE_SYMBOL1</a>)
00079       {
00080       <a class="code" href="classDynamic.html#a4">setVal</a>(<a class="code" href="dynamics_8h.html#a29a27">DynOTHER</a>);
00081       setText(t);
00082       }
00083 
<a name="l00084"></a><a class="code" href="classDynamic.html#a3">00084</a> <a class="code" href="classDynamic.html#a0">Dynamic::Dynamic</a>(<span class="keyword">const</span> <a class="code" href="classDynamic.html">Dynamic</a>&amp; d)
00085   : <a class="code" href="classSText.html">SText</a>(d)
00086       {
00087       <a class="code" href="classDynamic.html#r0">val</a> = d.<a class="code" href="classDynamic.html#r0">val</a>;
00088       }
00089 
00090 <span class="comment">//---------------------------------------------------------</span>
00091 <span class="comment">//   setVal</span>
00092 <span class="comment">//---------------------------------------------------------</span>
00093 
<a name="l00094"></a><a class="code" href="classDynamic.html#a4">00094</a> <span class="keywordtype">void</span> <a class="code" href="classDynamic.html#a4">Dynamic::setVal</a>(DynVal idx)
00095       {
00096       <a class="code" href="classDynamic.html#r0">val</a> = idx;
00097       setStyle(<a class="code" href="dynamics_8cpp.html#a11">dynList</a>[<a class="code" href="classDynamic.html#r0">val</a>].textStyle);
00098       setText(<a class="code" href="dynamics_8cpp.html#a11">dynList</a>[<a class="code" href="classDynamic.html#r0">val</a>].str);
00099       }
00100 
00101 <span class="comment">//---------------------------------------------------------</span>
00102 <span class="comment">//   endDrag</span>
00103 <span class="comment">//    bind to nearest tick position</span>
00104 <span class="comment">//---------------------------------------------------------</span>
00105 
<a name="l00106"></a><a class="code" href="classDynamic.html#a7">00106</a> <span class="keywordtype">void</span> <a class="code" href="classDynamic.html#a7">Dynamic::endDrag</a>()
00107       {
00108       <span class="keywordtype">int</span> ntick;
00109       <a class="code" href="classStaff.html">Staff</a>* stf = <a class="code" href="classElement.html#a59">staff</a>();
00110       QPointF offset;
00111       <a class="code" href="classSegment.html">Segment</a>* seg;
00112       <a class="code" href="classMeasure.html">Measure</a>* measure = _score-&gt;<a class="code" href="classScore.html#a21">pos2measure</a>(<a class="code" href="classElement.html#a27">aref</a>(), &amp;ntick, &amp;stf, 0, &amp;seg, &amp;offset);
00113       <span class="keywordflow">if</span> (measure) {
00114             offset /= <a class="code" href="spatium_8h.html#a0">_spatium</a>;
00115             setTick(ntick);
00116             setUserOff(offset);
00117 <span class="comment">// printf("%p Dynamic::endDrag()  staff %d-%d tick %d\n", this, staffIdx(), stf, ntick);</span>
00118             setStaff(stf);
00119             <span class="keywordflow">if</span> (measure != <a class="code" href="classElement.html#a10">parent</a>()) {
00120                   ((<a class="code" href="classMeasure.html">Measure</a>*)<a class="code" href="classElement.html#a10">parent</a>())-&gt;remove(<span class="keyword">this</span>);
00121                   measure-&gt;<a class="code" href="classMeasure.html#a8">add</a>(<span class="keyword">this</span>);
00122                   }
00123             }
00124       <span class="keywordflow">else</span>
00125             printf(<span class="stringliteral">"Dynamic::endDrag(): measure not found\n"</span>);
00126       }
00127 
00128 <span class="comment">//---------------------------------------------------------</span>
00129 <span class="comment">//   write</span>
00130 <span class="comment">//---------------------------------------------------------</span>
00131 
<a name="l00132"></a><a class="code" href="classDynamic.html#a8">00132</a> <span class="keywordtype">void</span> <a class="code" href="classDynamic.html#a8">Dynamic::write</a>(<a class="code" href="classXml.html">Xml</a>&amp; xml)<span class="keyword"> const</span>
00133 <span class="keyword">      </span>{
00134       xml.<a class="code" href="classXml.html#a8">tag</a>(<span class="stringliteral">"Dynamic"</span>);
00135       <span class="keywordflow">if</span> (<a class="code" href="classDynamic.html#r0">val</a> == <a class="code" href="dynamics_8h.html#a29a27">DynOTHER</a>)
00136             xml.<a class="code" href="classXml.html#a16">strTag</a>(<span class="stringliteral">"other-dynamics"</span>, <a class="code" href="classSText.html#a11">text</a>());
00137       <span class="keywordflow">else</span>
00138             xml.<a class="code" href="classXml.html#a10">tagE</a>(<a class="code" href="dynamics_8cpp.html#a11">dynList</a>[<a class="code" href="classDynamic.html#r0">val</a>].tag);
00139       Element::writeProperties(xml);
00140       xml.<a class="code" href="classXml.html#a9">etag</a>(<span class="stringliteral">"Dynamic"</span>);
00141       }
00142 
00143 <span class="comment">//---------------------------------------------------------</span>
00144 <span class="comment">//   tag2val</span>
00145 <span class="comment">//---------------------------------------------------------</span>
00146 
<a name="l00147"></a><a class="code" href="classDynamic.html#e0">00147</a> <a class="code" href="dynamics_8h.html#a29">DynVal</a> <a class="code" href="classDynamic.html#e0">Dynamic::tag2val</a>(<span class="keyword">const</span> QString&amp; tag)
00148       {
00149       <span class="keywordtype">int</span> n = <span class="keyword">sizeof</span>(<a class="code" href="dynamics_8cpp.html#a11">dynList</a>)/<span class="keyword">sizeof</span>(*dynList);
00150       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {
00151             <span class="keywordflow">if</span> (<a class="code" href="dynamics_8cpp.html#a11">dynList</a>[i].<a class="code" href="structDyn.html#o3">tag</a> == tag) {
00152                   <span class="keywordflow">return</span> <a class="code" href="dynamics_8h.html#a29">DynVal</a>(<a class="code" href="dynamics_8cpp.html#a11">dynList</a>[i].<a class="code" href="classDynamic.html#r0">val</a>);
00153                   }
00154             }
00155       <span class="keywordflow">return</span> <a class="code" href="dynamics_8h.html#a29a28">DynINVALID</a>;
00156       }
00157 
00158 <span class="comment">//---------------------------------------------------------</span>
00159 <span class="comment">//   read</span>
00160 <span class="comment">//---------------------------------------------------------</span>
00161 
<a name="l00162"></a><a class="code" href="classDynamic.html#a9">00162</a> <span class="keywordtype">void</span> <a class="code" href="classDynamic.html#a9">Dynamic::read</a>(QDomNode node)
00163       {
00164       <span class="keywordflow">for</span> (node = node.firstChild(); !node.isNull(); node = node.nextSibling()) {
00165             QDomElement e = node.toElement();
00166             <span class="keywordflow">if</span> (e.isNull())
00167                   <span class="keywordflow">continue</span>;
00168             QString tag(e.tagName());
00169             <a class="code" href="dynamics_8h.html#a29">DynVal</a> v = <a class="code" href="classDynamic.html#e0">tag2val</a>(tag);
00170             <span class="keywordflow">if</span> (v != <a class="code" href="dynamics_8h.html#a29a28">DynINVALID</a>) {
00171                   <a class="code" href="classDynamic.html#a4">setVal</a>(v);
00172                   <span class="keywordflow">if</span> (v == <a class="code" href="dynamics_8h.html#a29a27">DynOTHER</a>) {
00173                         setText(e.text());
00174                         printf(<span class="stringliteral">"dyn-other &lt;%s&gt;\n"</span>, e.text().latin1());
00175                         }
00176                   }
00177             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Element::readProperties(node))
00178                   ;
00179             <span class="keywordflow">else</span>
00180                   <a class="code" href="utils_8h.html#a4">domError</a>(node);
00181             }
00182       }
00183 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:28 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
