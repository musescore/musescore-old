<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: pagesettings.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>pagesettings.cpp</h1><a href="pagesettings_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MuseScore</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: pagesettings.cpp,v 1.8 2005/06/27 19:50:24 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2002-2004 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#include "<a class="code" href="globals_8h.html">globals.h</a>"</span>
00010 <span class="preprocessor">#include "<a class="code" href="pagesettings_8h.html">pagesettings.h</a>"</span>
00011 <span class="preprocessor">#include "<a class="code" href="page_8h.html">page.h</a>"</span>
00012 <span class="preprocessor">#include "<a class="code" href="style_8h.html">style.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="project_8h.html">project.h</a>"</span>
00014 
<a name="l00015"></a><a class="code" href="pagesettings_8cpp.html#a0">00015</a> <span class="preprocessor">#define MM(x) ((x)*DPMM)</span>
<a name="l00016"></a><a class="code" href="pagesettings_8cpp.html#a1">00016</a> <span class="preprocessor"></span><span class="preprocessor">#define IN(x) ((x)*DPI)</span>
00017 <span class="preprocessor"></span>
<a name="l00018"></a><a class="code" href="pagesettings_8cpp.html#a2">00018</a> <span class="keyword">const</span> <a class="code" href="structPaperSize.html">PaperSize</a> <a class="code" href="page_8h.html#a4">paperSizes</a>[] = {
00019       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A4,      <span class="stringliteral">"A4"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(210),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(297)),
00020       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B5,      <span class="stringliteral">"B5"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(176),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(250)),
00021       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Letter,  <span class="stringliteral">"Letter"</span>,    <a class="code" href="pagesettings_8cpp.html#a1">IN</a>(8.5),  <a class="code" href="pagesettings_8cpp.html#a1">IN</a>(11)),
00022       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Legal,   <span class="stringliteral">"Legal"</span>,     <a class="code" href="pagesettings_8cpp.html#a1">IN</a>(8.5),  <a class="code" href="pagesettings_8cpp.html#a1">IN</a>(14)),
00023       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Executive,<span class="stringliteral">"Executive"</span>, <a class="code" href="pagesettings_8cpp.html#a1">IN</a>(7.5),  <a class="code" href="pagesettings_8cpp.html#a1">IN</a>(10)),
00024       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A0,      <span class="stringliteral">"A0"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(841),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(1189)),
00025       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A1,      <span class="stringliteral">"A1"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(594),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(841)),
00026       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A2,      <span class="stringliteral">"A2"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(420),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(594)),
00027       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A3,      <span class="stringliteral">"A3"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(297),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(420)),
00028       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A5,      <span class="stringliteral">"A5"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(148),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(210)),
00029       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A6,      <span class="stringliteral">"A6"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(105),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(148)),
00030       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A7,      <span class="stringliteral">"A7"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(74),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(105)),
00031       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A8,      <span class="stringliteral">"A8"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(52),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(74)),
00032       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A9,      <span class="stringliteral">"A9"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(37),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(52)),
00033       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B0,      <span class="stringliteral">"B0"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(1000), <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(1414)),
00034       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B1,      <span class="stringliteral">"B1"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(707),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(1000)),
00035       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B10,     <span class="stringliteral">"B10"</span>,       <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(31),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(44)),
00036       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B2,      <span class="stringliteral">"B2"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(500),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(707)),
00037       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B3,      <span class="stringliteral">"B3"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(353),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(500)),
00038       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B4,      <span class="stringliteral">"B4"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(250),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(353)),
00039       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B5,      <span class="stringliteral">"B5"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(125),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(176)),
00040       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B6,      <span class="stringliteral">"B6"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(88),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(125)),
00041       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B7,      <span class="stringliteral">"B7"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(62),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(88)),
00042       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B8,      <span class="stringliteral">"B8"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(44),   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(62)),
00043       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::B9,      <span class="stringliteral">"B9"</span>,        <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(163),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(229)),
00044       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Comm10E, <span class="stringliteral">"Comm10E"</span>,   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(105),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(241)),
00045       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::DLE,     <span class="stringliteral">"DLE"</span>,       <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(110),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(220)),
00046       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Folio,   <span class="stringliteral">"Folio"</span>,     <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(210),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(330)),
00047       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Ledger,  <span class="stringliteral">"Ledger"</span>,    <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(432),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(279)),
00048       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::Tabloid, <span class="stringliteral">"Tabloid"</span>,   <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(279),  <a class="code" href="pagesettings_8cpp.html#a0">MM</a>(432)),
00049       <a class="code" href="structPaperSize.html">PaperSize</a>(QPrinter::A4, 0, 0, 0  )
00050       };
00051 
00052 <span class="comment">//---------------------------------------------------------</span>
00053 <span class="comment">//   paperSizeNameToIndex</span>
00054 <span class="comment">//---------------------------------------------------------</span>
00055 
<a name="l00056"></a><a class="code" href="pagesettings_8cpp.html#a3">00056</a> <span class="keywordtype">int</span> <a class="code" href="pagesettings_8cpp.html#a3">paperSizeNameToIndex</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name)
00057       {
00058       <span class="keywordtype">int</span> i;
00059       <span class="keywordflow">for</span> (i = 0;;++i) {
00060             <span class="keywordflow">if</span> (<a class="code" href="page_8h.html#a4">paperSizes</a>[i].<a class="code" href="structPaperSize.html#o1">name</a> == 0)
00061                   <span class="keywordflow">break</span>;
00062             <span class="keywordflow">if</span> (strcmp(name, <a class="code" href="page_8h.html#a4">paperSizes</a>[i].name) == 0)
00063                   <span class="keywordflow">return</span> i;
00064             }
00065       printf(<span class="stringliteral">"unknown paper size\n"</span>);
00066       <span class="keywordflow">return</span> 0;
00067       }
00068 
00069 <span class="comment">//---------------------------------------------------------</span>
00070 <span class="comment">//   PageSettings</span>
00071 <span class="comment">//---------------------------------------------------------</span>
00072 
<a name="l00073"></a><a class="code" href="classPageSettings.html#a0">00073</a> <a class="code" href="classPageSettings.html#a0">PageSettings::PageSettings</a>(QWidget* parent, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">bool</span> modal, Qt::WFlags fl)
00074    : <a class="code" href="classPageSettingsBase.html">PageSettingsBase</a>(parent, name, modal, fl)
00075       {
00076       mmButton-&gt;setDown(<span class="keyword">true</span>);
00077       incButton-&gt;setDown(<span class="keyword">false</span>);
00078       connect(mmButton, SIGNAL(toggled(<span class="keywordtype">bool</span>)), SLOT(<a class="code" href="classPageSettings.html#k0">mmToggled</a>(<span class="keywordtype">bool</span>)));
00079       connect(incButton, SIGNAL(toggled(<span class="keywordtype">bool</span>)), SLOT(<a class="code" href="classPageSettings.html#k1">inchToggled</a>(<span class="keywordtype">bool</span>)));
00080       connect(buttonApply, SIGNAL(clicked()), SLOT(<a class="code" href="classPageSettings.html#k3">apply</a>()));
00081       connect(buttonOk, SIGNAL(clicked()), SLOT(<a class="code" href="classPageSettings.html#k4">ok</a>()));
00082       connect(landscape, SIGNAL(toggled(<span class="keywordtype">bool</span>)), SLOT(<a class="code" href="classPageSettings.html#k6">landscapeToggled</a>(<span class="keywordtype">bool</span>)));
00083       connect(twosided, SIGNAL(toggled(<span class="keywordtype">bool</span>)), SLOT(<a class="code" href="classPageSettings.html#k5">twosidedToggled</a>(<span class="keywordtype">bool</span>)));
00084 
00085 
00086 <span class="comment">//TODO      pageGroup-&gt;setCurrentItem(curIdx);</span>
00087       connect(pageGroup, SIGNAL(activated(<span class="keywordtype">int</span>)), SLOT(<a class="code" href="classPageSettings.html#k2">pageFormatSelected</a>(<span class="keywordtype">int</span>)));
00088       }
00089 
00090 <span class="comment">//---------------------------------------------------------</span>
00091 <span class="comment">//   setScore</span>
00092 <span class="comment">//---------------------------------------------------------</span>
00093 
<a name="l00094"></a><a class="code" href="classPageSettings.html#a1">00094</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#a1">PageSettings::setScore</a>(<a class="code" href="classScore.html">Score</a>* s)
00095       {
00096       <a class="code" href="classPageSettings.html#r11">cs</a>  = s;
00097       <a class="code" href="classPageSettings.html#r4">otm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o7">oddTopMargin</a>;
00098       <a class="code" href="classPageSettings.html#r5">obm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o8">oddBottomMargin</a>;
00099       <a class="code" href="classPageSettings.html#r2">olm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o5">oddLeftMargin</a>;
00100       <a class="code" href="classPageSettings.html#r3">orm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o6">oddRightMargin</a>;
00101       <a class="code" href="classPageSettings.html#r8">etm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o3">evenTopMargin</a>;
00102       <a class="code" href="classPageSettings.html#r9">ebm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o4">evenBottomMargin</a>;
00103       <a class="code" href="classPageSettings.html#r6">elm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o1">evenLeftMargin</a>;
00104       <a class="code" href="classPageSettings.html#r7">erm</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o2">evenRightMargin</a>;
00105       <a class="code" href="classPageSettings.html#r10">sp</a>  = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a114">spatium</a>();
00106       <a class="code" href="classPageSettings.html#r0">w</a>   = round(<a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#a1">width</a>());
00107       <a class="code" href="classPageSettings.html#r1">h</a>   = round(<a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#a2">height</a>());
00108       <a class="code" href="classPageSettings.html#r12">landscapeVal</a> = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o9">landscape</a>;
00109       <a class="code" href="classPageSettings.html#r13">twosidedVal</a>  = <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o10">twosided</a>;
00110 <span class="comment">//      int curIdx = cs-&gt;pageFormat()-&gt;size;</span>
00111 
00112       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <span class="keyword">true</span>; ++i) {
00113             <span class="keywordflow">if</span> (<a class="code" href="page_8h.html#a4">paperSizes</a>[i].<a class="code" href="structPaperSize.html#o1">name</a> == 0)
00114                   <span class="keywordflow">break</span>;
00115             pageGroup-&gt;insertItem(QString(<a class="code" href="page_8h.html#a4">paperSizes</a>[i].name));
00116             }
00117 
00118 <span class="comment">//TODO      pageGroup-&gt;setCurrentItem(curIdx);</span>
00119       <a class="code" href="classPageSettings.html#d0">setValues</a>();
00120       }
00121 
00122 <span class="comment">//---------------------------------------------------------</span>
00123 <span class="comment">//   setValues</span>
00124 <span class="comment">//---------------------------------------------------------</span>
00125 
<a name="l00126"></a><a class="code" href="classPageSettings.html#d0">00126</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#d0">PageSettings::setValues</a>()
00127       {
00128       QString s;
00129       <span class="keywordflow">if</span> (mmButton-&gt;isChecked()) {
00130             oddPageTopMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r4">otm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00131             oddPageBottomMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r5">obm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00132             oddPageLeftMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r2">olm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00133             oddPageRightMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r3">orm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00134 
00135             evenPageTopMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r8">etm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00136             evenPageBottomMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r9">ebm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00137             evenPageLeftMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r6">elm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00138             evenPageRightMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r7">erm</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00139 
00140             spatiumEntry-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r10">sp</a>/DPMM, <span class="charliteral">'f'</span>, 4));
00141             <span class="keywordflow">if</span> (<a class="code" href="classPageSettings.html#r12">landscapeVal</a>) {
00142                   pageWidthLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r1">h</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00143                   pageHeightLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r0">w</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00144                   }
00145             <span class="keywordflow">else</span> {
00146                   pageWidthLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r0">w</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00147                   pageHeightLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r1">h</a>/DPMM, <span class="charliteral">'f'</span>, 2));
00148                   }
00149             }
00150       <span class="keywordflow">else</span> {
00151             oddPageTopMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r4">otm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00152             oddPageBottomMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r5">obm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00153             oddPageLeftMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r2">olm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00154             oddPageRightMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r3">orm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00155 
00156             evenPageTopMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r8">etm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00157             evenPageBottomMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r9">ebm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00158             evenPageLeftMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r6">elm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00159             evenPageRightMargin-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r7">erm</a>/DPI, <span class="charliteral">'f'</span>, 2));
00160 
00161             spatiumEntry-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r10">sp</a>/DPI, <span class="charliteral">'f'</span>, 4));
00162             <span class="keywordflow">if</span> (<a class="code" href="classPageSettings.html#r12">landscapeVal</a>) {
00163                   pageWidthLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r1">h</a>/DPI, <span class="charliteral">'f'</span>, 2));
00164                   pageHeightLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r0">w</a>/DPI, <span class="charliteral">'f'</span>, 2));
00165                   }
00166             <span class="keywordflow">else</span> {
00167                   pageWidthLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r0">w</a>/DPI, <span class="charliteral">'f'</span>, 2));
00168                   pageHeightLabel-&gt;setText(s.setNum(<a class="code" href="classPageSettings.html#r1">h</a>/DPI, <span class="charliteral">'f'</span>, 2));
00169                   }
00170             }
00171 
00172       evenPageTopMargin-&gt;setEnabled(<a class="code" href="classPageSettings.html#r13">twosidedVal</a>);
00173       evenPageBottomMargin-&gt;setEnabled(<a class="code" href="classPageSettings.html#r13">twosidedVal</a>);
00174       evenPageLeftMargin-&gt;setEnabled(<a class="code" href="classPageSettings.html#r13">twosidedVal</a>);
00175       evenPageRightMargin-&gt;setEnabled(<a class="code" href="classPageSettings.html#r13">twosidedVal</a>);
00176 
00177       landscape-&gt;setChecked(<a class="code" href="classPageSettings.html#r12">landscapeVal</a>);
00178       twosided-&gt;setChecked(<a class="code" href="classPageSettings.html#r13">twosidedVal</a>);
00179       }
00180 
00181 <span class="comment">//---------------------------------------------------------</span>
00182 <span class="comment">//   inchToggled</span>
00183 <span class="comment">//---------------------------------------------------------</span>
00184 
<a name="l00185"></a><a class="code" href="classPageSettings.html#k1">00185</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k1">PageSettings::inchToggled</a>(<span class="keywordtype">bool</span> flag)
00186       {
00187       <span class="keywordflow">if</span> (flag)
00188             mmButton-&gt;setChecked(<span class="keyword">false</span>);
00189       <a class="code" href="classPageSettings.html#d0">setValues</a>();
00190       }
00191 
00192 <span class="comment">//---------------------------------------------------------</span>
00193 <span class="comment">//   mmToggled</span>
00194 <span class="comment">//---------------------------------------------------------</span>
00195 
<a name="l00196"></a><a class="code" href="classPageSettings.html#k0">00196</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k0">PageSettings::mmToggled</a>(<span class="keywordtype">bool</span> flag)
00197       {
00198       <span class="keywordflow">if</span> (flag)
00199             incButton-&gt;setChecked(<span class="keyword">false</span>);
00200       <a class="code" href="classPageSettings.html#d0">setValues</a>();
00201       }
00202 
00203 <span class="comment">//---------------------------------------------------------</span>
00204 <span class="comment">//   landscapeToggled</span>
00205 <span class="comment">//---------------------------------------------------------</span>
00206 
<a name="l00207"></a><a class="code" href="classPageSettings.html#k6">00207</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k6">PageSettings::landscapeToggled</a>(<span class="keywordtype">bool</span> flag)
00208       {
00209       <a class="code" href="classPageSettings.html#r12">landscapeVal</a> = flag;
00210       <a class="code" href="classPageSettings.html#d0">setValues</a>();
00211       }
00212 
00213 <span class="comment">//---------------------------------------------------------</span>
00214 <span class="comment">//   twosidedToggled</span>
00215 <span class="comment">//---------------------------------------------------------</span>
00216 
<a name="l00217"></a><a class="code" href="classPageSettings.html#k5">00217</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k5">PageSettings::twosidedToggled</a>(<span class="keywordtype">bool</span> flag)
00218       {
00219       <a class="code" href="classPageSettings.html#r13">twosidedVal</a> = flag;
00220       <a class="code" href="classPageSettings.html#d0">setValues</a>();
00221       }
00222 
00223 <span class="comment">//---------------------------------------------------------</span>
00224 <span class="comment">//   apply</span>
00225 <span class="comment">//---------------------------------------------------------</span>
00226 
<a name="l00227"></a><a class="code" href="classPageSettings.html#k3">00227</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k3">PageSettings::apply</a>()
00228       {
00229       <span class="keywordtype">double</span> val;
00230       <span class="keywordtype">bool</span> <a class="code" href="classPageSettings.html#k4">ok</a>;
00231 
00232       val = oddPageTopMargin-&gt;text().toDouble(&amp;ok);
00233       <span class="keywordflow">if</span> (ok)
00234             <a class="code" href="classPageSettings.html#r4">otm</a> = val;
00235       val = oddPageBottomMargin-&gt;text().toDouble(&amp;ok);
00236       <span class="keywordflow">if</span> (ok)
00237             <a class="code" href="classPageSettings.html#r5">obm</a> = val;
00238       val = oddPageLeftMargin-&gt;text().toDouble(&amp;ok);
00239       <span class="keywordflow">if</span> (ok)
00240             <a class="code" href="classPageSettings.html#r2">olm</a> = val;
00241       val = oddPageRightMargin-&gt;text().toDouble(&amp;ok);
00242       <span class="keywordflow">if</span> (ok)
00243             <a class="code" href="classPageSettings.html#r3">orm</a> = val;
00244 
00245       val = evenPageTopMargin-&gt;text().toDouble(&amp;ok);
00246       <span class="keywordflow">if</span> (ok)
00247             <a class="code" href="classPageSettings.html#r8">etm</a> = val;
00248       val = evenPageBottomMargin-&gt;text().toDouble(&amp;ok);
00249       <span class="keywordflow">if</span> (ok)
00250             <a class="code" href="classPageSettings.html#r9">ebm</a> = val;
00251       val = evenPageLeftMargin-&gt;text().toDouble(&amp;ok);
00252       <span class="keywordflow">if</span> (ok)
00253             <a class="code" href="classPageSettings.html#r6">elm</a> = val;
00254       val = evenPageRightMargin-&gt;text().toDouble(&amp;ok);
00255       <span class="keywordflow">if</span> (ok)
00256             <a class="code" href="classPageSettings.html#r7">erm</a> = val;
00257 
00258       val = spatiumEntry-&gt;text().toDouble(&amp;ok);
00259       <span class="keywordflow">if</span> (ok)
00260             <a class="code" href="classPageSettings.html#r10">sp</a> = val;
00261 
00262       <span class="keywordtype">double</span> f = mmButton-&gt;isChecked() ? DPMM : DPI;
00263 
00264       <a class="code" href="classPageSettings.html#r4">otm</a> *= f;
00265       <a class="code" href="classPageSettings.html#r5">obm</a> *= f;
00266       <a class="code" href="classPageSettings.html#r2">olm</a> *= f;
00267       <a class="code" href="classPageSettings.html#r3">orm</a> *= f;
00268 
00269       <a class="code" href="classPageSettings.html#r8">etm</a> *= f;
00270       <a class="code" href="classPageSettings.html#r9">ebm</a> *= f;
00271       <a class="code" href="classPageSettings.html#r6">elm</a> *= f;
00272       <a class="code" href="classPageSettings.html#r7">erm</a> *= f;
00273 
00274       <a class="code" href="classPageSettings.html#r10">sp</a> *= f;
00275 
00276       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o0">size</a>             = pageGroup-&gt;currentItem();
00277       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o3">evenTopMargin</a>    = <a class="code" href="classPageSettings.html#r8">etm</a>;
00278       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o4">evenBottomMargin</a> = <a class="code" href="classPageSettings.html#r9">ebm</a>;
00279       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o1">evenLeftMargin</a>   = <a class="code" href="classPageSettings.html#r6">elm</a>;
00280       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o2">evenRightMargin</a>  = <a class="code" href="classPageSettings.html#r7">erm</a>;
00281 
00282       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o7">oddTopMargin</a>     = <a class="code" href="classPageSettings.html#r4">otm</a>;
00283       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o8">oddBottomMargin</a>  = <a class="code" href="classPageSettings.html#r5">obm</a>;
00284       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o5">oddLeftMargin</a>    = <a class="code" href="classPageSettings.html#r2">olm</a>;
00285       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o6">oddRightMargin</a>   = <a class="code" href="classPageSettings.html#r3">orm</a>;
00286 
00287       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o9">landscape</a> = landscape-&gt;isChecked();
00288       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a135">pageFormat</a>()-&gt;<a class="code" href="structPageFormat.html#o10">twosided</a> = twosided-&gt;isChecked();
00289       <a class="code" href="classPageSettings.html#r11">cs</a>-&gt;<a class="code" href="classScore.html#a113">setSpatium</a>(<a class="code" href="classPageSettings.html#r10">sp</a>);
00290       <a class="code" href="spatium_8h.html#a0">_spatium</a> = <a class="code" href="classPageSettings.html#r10">sp</a>;
00291       emit <a class="code" href="classPageSettings.html#l0">pageSettingsChanged</a>();
00292       }
00293 
00294 <span class="comment">//---------------------------------------------------------</span>
00295 <span class="comment">//   ok</span>
00296 <span class="comment">//---------------------------------------------------------</span>
00297 
<a name="l00298"></a><a class="code" href="classPageSettings.html#k4">00298</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k4">PageSettings::ok</a>()
00299       {
00300       <a class="code" href="classPageSettings.html#k3">apply</a>();
00301       done(0);
00302       }
00303 
00304 <span class="comment">//---------------------------------------------------------</span>
00305 <span class="comment">//   pageFormatSelected</span>
00306 <span class="comment">//---------------------------------------------------------</span>
00307 
<a name="l00308"></a><a class="code" href="classPageSettings.html#k2">00308</a> <span class="keywordtype">void</span> <a class="code" href="classPageSettings.html#k2">PageSettings::pageFormatSelected</a>(<span class="keywordtype">int</span> pf)
00309       {
00310       <a class="code" href="classPageSettings.html#r0">w</a>  = <a class="code" href="page_8h.html#a4">paperSizes</a>[pf].<a class="code" href="structPaperSize.html#o2">w</a>;
00311       <a class="code" href="classPageSettings.html#r1">h</a>  = <a class="code" href="page_8h.html#a4">paperSizes</a>[pf].<a class="code" href="structPaperSize.html#o3">h</a>;
00312       <a class="code" href="classPageSettings.html#d0">setValues</a>();
00313       }
00314 
00315 <span class="comment">//---------------------------------------------------------</span>
00316 <span class="comment">//   width</span>
00317 <span class="comment">//---------------------------------------------------------</span>
00318 
<a name="l00319"></a><a class="code" href="structPageFormat.html#a1">00319</a> <span class="keywordtype">double</span> <a class="code" href="structPageFormat.html#a1">PageFormat::width</a>()<span class="keyword"> const</span>
00320 <span class="keyword">      </span>{
00321       <span class="keywordflow">return</span> <a class="code" href="structPageFormat.html#o9">landscape</a> ? <a class="code" href="page_8h.html#a4">paperSizes</a>[<a class="code" href="structPageFormat.html#o0">size</a>].<a class="code" href="structPaperSize.html#o3">h</a> : <a class="code" href="page_8h.html#a4">paperSizes</a>[<a class="code" href="structPageFormat.html#o0">size</a>].<a class="code" href="structPaperSize.html#o2">w</a>;
00322       }
00323 
00324 <span class="comment">//---------------------------------------------------------</span>
00325 <span class="comment">//   height</span>
00326 <span class="comment">//---------------------------------------------------------</span>
00327 
<a name="l00328"></a><a class="code" href="structPageFormat.html#a2">00328</a> <span class="keywordtype">double</span> <a class="code" href="structPageFormat.html#a2">PageFormat::height</a>()<span class="keyword"> const</span>
00329 <span class="keyword">      </span>{
00330       <span class="keywordflow">return</span> <a class="code" href="structPageFormat.html#o9">landscape</a> ? <a class="code" href="page_8h.html#a4">paperSizes</a>[<a class="code" href="structPageFormat.html#o0">size</a>].<a class="code" href="structPaperSize.html#o2">w</a> : <a class="code" href="page_8h.html#a4">paperSizes</a>[<a class="code" href="structPageFormat.html#o0">size</a>].<a class="code" href="structPaperSize.html#o3">h</a>;
00331       }
00332 
00333 <span class="comment">//---------------------------------------------------------</span>
00334 <span class="comment">//   name</span>
00335 <span class="comment">//---------------------------------------------------------</span>
00336 
<a name="l00337"></a><a class="code" href="structPageFormat.html#a3">00337</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structPageFormat.html#a3">PageFormat::name</a>()<span class="keyword"> const</span>
00338 <span class="keyword">      </span>{
00339       <span class="keywordflow">return</span> <a class="code" href="page_8h.html#a4">paperSizes</a>[<a class="code" href="structPageFormat.html#o0">size</a>].<a class="code" href="structPaperSize.html#o1">name</a>;
00340       }
00341 
00342 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:29 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
