<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: project.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>project.h</h1><a href="project_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MusE Score</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: project.h,v 1.54 2005/06/27 19:50:26 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2002-2004 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#ifndef __PROJECT_H__</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#define __PROJECT_H__</span>
00011 <span class="preprocessor"></span>
00012 <span class="preprocessor">#include "<a class="code" href="system_8h.html">system.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="undo_8h.html">undo.h</a>"</span>
00014 
00015 <span class="keyword">class </span><a class="code" href="classPage.html">Page</a>;
00016 <span class="keyword">class </span><a class="code" href="classPageList.html">PageList</a>;
00017 <span class="keyword">class </span><a class="code" href="classSigList.html">SigList</a>;
00018 <span class="keyword">class </span><a class="code" href="classKeyList.html">KeyList</a>;
00019 <span class="keyword">class </span><a class="code" href="structPageFormat.html">PageFormat</a>;
00020 <span class="keyword">class </span><a class="code" href="classSystemList.html">SystemList</a>;
00021 <span class="keyword">class </span><a class="code" href="classElementList.html">ElementList</a>;
00022 <span class="keyword">class </span><a class="code" href="classTempoList.html">TempoList</a>;
00023 <span class="keyword">class </span><a class="code" href="classSelection.html">Selection</a>;
00024 <span class="keyword">class </span><a class="code" href="classSegment.html">Segment</a>;
00025 <span class="keyword">class </span><a class="code" href="classRest.html">Rest</a>;
00026 <span class="keyword">class </span><a class="code" href="classXml.html">Xml</a>;
00027 <span class="keyword">class </span><a class="code" href="classMuseScore.html">MuseScore</a>;
00028 <span class="keyword">class </span><a class="code" href="classCanvas.html">Canvas</a>;
00029 <span class="keyword">class </span><a class="code" href="classViewer.html">Viewer</a>;
00030 <span class="keyword">class </span><a class="code" href="classNoteAttribute.html">NoteAttribute</a>;
00031 <span class="keyword">class </span><a class="code" href="classNote.html">Note</a>;
00032 <span class="keyword">class </span><a class="code" href="classChord.html">Chord</a>;
00033 <span class="keyword">class </span><a class="code" href="classChordRest.html">ChordRest</a>;
00034 <span class="keyword">class </span><a class="code" href="classDynamic.html">Dynamic</a>;
00035 <span class="keyword">class </span><a class="code" href="classSlur.html">Slur</a>;
00036 <span class="keyword">class </span><a class="code" href="classHairpin.html">Hairpin</a>;
00037 <span class="keyword">class </span><a class="code" href="structUndo.html">Undo</a>;
00038 <span class="keyword">class </span><a class="code" href="classSynth.html">Synth</a>;
00039 <span class="keyword">class </span><a class="code" href="classAudio.html">Audio</a>;
00040 <span class="keyword">class </span><a class="code" href="classSymbolPalette.html">SymbolPalette</a>;
00041 <span class="keyword">class </span><a class="code" href="classEditTempo.html">EditTempo</a>;
00042 <span class="keyword">class </span><a class="code" href="classPart.html">Part</a>;
00043 <span class="keyword">class </span><a class="code" href="classStaffList.html">StaffList</a>;
00044 <span class="keyword">class </span><a class="code" href="classMidiFile.html">MidiFile</a>;
00045 
<a name="l00046"></a><a class="code" href="project_8h.html#a0">00046</a> <span class="keyword">extern</span> QPoint <a class="code" href="project_8h.html#a0">scorePos</a>;
<a name="l00047"></a><a class="code" href="project_8h.html#a1">00047</a> <span class="keyword">extern</span> QSize <a class="code" href="project_8h.html#a1">scoreSize</a>;
<a name="l00048"></a><a class="code" href="project_8h.html#a2">00048</a> <span class="keyword">extern</span> <a class="code" href="classMuseScore.html">MuseScore</a>* <a class="code" href="project_8cpp.html#a2">mscore</a>;
<a name="l00049"></a><a class="code" href="project_8h.html#a3">00049</a> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="element_8cpp.html#a0">debugMode</a>;
<a name="l00050"></a><a class="code" href="project_8h.html#a4">00050</a> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="project_8cpp.html#a4">layoutDebug</a>;
<a name="l00051"></a><a class="code" href="project_8h.html#a5">00051</a> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="project_8cpp.html#a5">noSeq</a>;            <span class="comment">// dont use sequencer; cmd line option</span>
<a name="l00052"></a><a class="code" href="project_8h.html#a6">00052</a> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="project_8cpp.html#a6">noMidi</a>;           <span class="comment">// dont use midi; cmd line option</span>
<a name="l00053"></a><a class="code" href="project_8h.html#a7">00053</a> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="element_8cpp.html#a1">showInvisible</a>;
<a name="l00054"></a><a class="code" href="project_8h.html#a8">00054</a> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="project_8cpp.html#a8">showRubberBand</a>;
00055 
00056 <span class="keyword">class </span><a class="code" href="classPartList.html">PartList</a>;
00057 
00058 <span class="comment">//---------------------------------------------------------</span>
00059 <span class="comment">//   ElemList</span>
00060 <span class="comment">//---------------------------------------------------------</span>
00061 
<a name="l00062"></a><a class="code" href="classElemList.html">00062</a> <span class="keyword">class </span><a class="code" href="classElemList.html">ElemList</a> {
<a name="l00063"></a><a class="code" href="classElemList.html#r0">00063</a>       <span class="keywordtype">int</span> <a class="code" href="classElemList.html#r0">_size</a>;
<a name="l00064"></a><a class="code" href="classElemList.html#r1">00064</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classElemList.html#r1">_first</a>;
<a name="l00065"></a><a class="code" href="classElemList.html#r2">00065</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classElemList.html#r2">_last</a>;
00066 
00067    <span class="keyword">public</span>:
<a name="l00068"></a><a class="code" href="classElemList.html#a0">00068</a>       <a class="code" href="classElemList.html#a0">ElemList</a>() {
00069             <a class="code" href="classElemList.html#r1">_first</a> = 0;
00070             <a class="code" href="classElemList.html#r2">_last</a>  = 0;
00071             <a class="code" href="classElemList.html#r0">_size</a>  = 0;
00072             };
<a name="l00073"></a><a class="code" href="classElemList.html#a1">00073</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classElemList.html#a1">first</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classElemList.html#r1">_first</a>; }
<a name="l00074"></a><a class="code" href="classElemList.html#a2">00074</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classElemList.html#a2">last</a>()  const { <span class="keywordflow">return</span> <a class="code" href="classElemList.html#r2">_last</a>; }
<a name="l00075"></a><a class="code" href="classElemList.html#a3">00075</a>       <span class="keywordtype">void</span> <a class="code" href="classElemList.html#a3">clear</a>()           { <a class="code" href="classElemList.html#r1">_first</a> = <a class="code" href="classElemList.html#r2">_last</a> = 0; }
00076       <span class="keywordtype">void</span> push_back(<a class="code" href="classElement.html">Element</a>* e);
00077       <span class="keywordtype">void</span> push_front(<a class="code" href="classElement.html">Element</a>* e);
00078       <span class="keywordtype">void</span> insert(<a class="code" href="classElement.html">Element</a>*, <a class="code" href="classElement.html">Element</a>*);
00079       <span class="keywordtype">void</span> erase(<a class="code" href="classElement.html">Element</a>*);
00080       };
00081 
00082 <span class="comment">//---------------------------------------------------------</span>
00083 <span class="comment">//   ScoreView</span>
00084 <span class="comment">//---------------------------------------------------------</span>
00085 
<a name="l00086"></a><a class="code" href="classScoreView.html">00086</a> <span class="keyword">class </span><a class="code" href="classScoreView.html">ScoreView</a> {
00087    <span class="keyword">public</span>:
<a name="l00088"></a><a class="code" href="classScoreView.html#o2">00088</a>       qreal <a class="code" href="classScoreView.html#o0">_mag</a>, <a class="code" href="classScoreView.html#o1">_xoffset</a>, <a class="code" href="classScoreView.html#o2">_yoffset</a>;
<a name="l00089"></a><a class="code" href="classScoreView.html#a0">00089</a>       <a class="code" href="classScoreView.html#a0">ScoreView</a>() {
00090             <a class="code" href="classScoreView.html#o0">_mag</a>     = 1.0;
00091             <a class="code" href="classScoreView.html#o1">_xoffset</a> = 0.0;
00092             <a class="code" href="classScoreView.html#o2">_yoffset</a> = 0.0;
00093             }
00094       };
00095 
00096 <span class="comment">//---------------------------------------------------------</span>
00097 <span class="comment">//   ScoreLayout</span>
00098 <span class="comment">//---------------------------------------------------------</span>
00099 
<a name="l00100"></a><a class="code" href="classScoreLayout.html">00100</a> <span class="keyword">class </span><a class="code" href="classScoreLayout.html">ScoreLayout</a> {
00101    <span class="keyword">public</span>:
<a name="l00102"></a><a class="code" href="classScoreLayout.html#o0">00102</a>       <span class="keywordtype">double</span> <a class="code" href="classScoreLayout.html#o0">_spatium</a>;
<a name="l00103"></a><a class="code" href="classScoreLayout.html#o1">00103</a>       <a class="code" href="structPageFormat.html">PageFormat</a>* <a class="code" href="classScoreLayout.html#o1">pageFormat</a>;
00104       <a class="code" href="classScoreLayout.html#a0">ScoreLayout</a>();
00105       <a class="code" href="classScoreLayout.html#a1">~ScoreLayout</a>();
00106       };
00107 
00108 <span class="comment">//---------------------------------------------------------</span>
00109 <span class="comment">//   Score</span>
00110 <span class="comment">//---------------------------------------------------------</span>
00111 
<a name="l00112"></a><a class="code" href="classScore.html">00112</a> <span class="keyword">class </span><a class="code" href="classScore.html">Score</a> : <span class="keyword">public</span> QObject {
00113       Q_OBJECT
00114 
<a name="l00115"></a><a class="code" href="classScore.html#r0">00115</a>       QFileInfo <a class="code" href="classScore.html#r0">info</a>;
00116 
<a name="l00117"></a><a class="code" href="classScore.html#r1">00117</a>       QRectF <a class="code" href="classScore.html#r1">refresh</a>;
<a name="l00118"></a><a class="code" href="classScore.html#r2">00118</a>       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#r2">_needLayout</a>;
<a name="l00119"></a><a class="code" href="classScore.html#r3">00119</a>       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#r3">updateAll</a>;
<a name="l00120"></a><a class="code" href="classScore.html#r4">00120</a>       <span class="keywordtype">int</span> <a class="code" href="classScore.html#r4">keyState</a>;
00121 
<a name="l00122"></a><a class="code" href="classScore.html#r5">00122</a>       std::list&lt;Viewer*&gt; <a class="code" href="classScore.html#r5">viewer</a>;
<a name="l00123"></a><a class="code" href="classScore.html#r6">00123</a>       <a class="code" href="classScoreView.html">ScoreView</a> <a class="code" href="classScore.html#r6">scoreView</a>;
<a name="l00124"></a><a class="code" href="classScore.html#r7">00124</a>       <a class="code" href="classScoreLayout.html">ScoreLayout</a> <a class="code" href="classScore.html#r7">scoreLayout</a>;
00125 
<a name="l00126"></a><a class="code" href="classScore.html#r8">00126</a>       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#r8">_showInvisible</a>;
00127 
<a name="l00128"></a><a class="code" href="classScore.html#r9">00128</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classScore.html#r9">_paletteObject</a>;
00129 
<a name="l00130"></a><a class="code" href="classScore.html#r10">00130</a>       <a class="code" href="classEditTempo.html">EditTempo</a>* <a class="code" href="classScore.html#r10">editTempo</a>;
<a name="l00131"></a><a class="code" href="classScore.html#r11">00131</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classScore.html#r11">origDragObject</a>;
<a name="l00132"></a><a class="code" href="classScore.html#r12">00132</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classScore.html#r12">_dragObject</a>;
<a name="l00133"></a><a class="code" href="classScore.html#r13">00133</a>       <a class="code" href="classElementList.html">ElementList</a> <a class="code" href="classScore.html#r13">startDragSelected</a>;
<a name="l00134"></a><a class="code" href="classScore.html#r14">00134</a>       QPrinter <a class="code" href="classScore.html#r14">printer</a>;
00135 
<a name="l00136"></a><a class="code" href="classScore.html#r15">00136</a>       <a class="code" href="classElemList.html">ElemList</a> <a class="code" href="classScore.html#r15">_measures</a>;           <span class="comment">// here are the notes</span>
<a name="l00137"></a><a class="code" href="classScore.html#r16">00137</a>       <a class="code" href="classPartList.html">PartList</a>* <a class="code" href="classScore.html#r16">_parts</a>;
<a name="l00138"></a><a class="code" href="classScore.html#r17">00138</a>       <a class="code" href="classStaffList.html">StaffList</a>* <a class="code" href="classScore.html#r17">_staves</a>;
00139 
<a name="l00140"></a><a class="code" href="classScore.html#r18">00140</a>       <a class="code" href="classUndoList.html">UndoList</a> <a class="code" href="classScore.html#r18">undoList</a>;
<a name="l00141"></a><a class="code" href="classScore.html#r19">00141</a>       <a class="code" href="classUndoList.html">UndoList</a> <a class="code" href="classScore.html#r19">redoList</a>;
<a name="l00142"></a><a class="code" href="classScore.html#r20">00142</a>       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#r20">undoActive</a>;
00143 
00144       <a class="code" href="classChordRest.html">ChordRest</a>* <a class="code" href="classScore.html#d0">nextChordRest</a>(<a class="code" href="classChordRest.html">ChordRest</a>*);
00145       <a class="code" href="classChordRest.html">ChordRest</a>* <a class="code" href="classScore.html#d1">prevChordRest</a>(<a class="code" href="classChordRest.html">ChordRest</a>*);
00146       <a class="code" href="classChordRest.html">ChordRest</a>* <a class="code" href="classScore.html#d2">nextMeasure</a>(<a class="code" href="classChordRest.html">ChordRest</a>*);
00147       <a class="code" href="classChordRest.html">ChordRest</a>* <a class="code" href="classScore.html#d3">prevMeasure</a>(<a class="code" href="classChordRest.html">ChordRest</a>*);
00148       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d4">cmdSetBeamMode</a>(<span class="keywordtype">int</span>);
00149       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d5">cmdFlipStemDirection</a>();
00150       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d6">processSystemHeader</a>(<a class="code" href="classMeasure.html">Measure</a>* m);
00151       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d7">clearGenerated</a>(<a class="code" href="classMeasure.html">Measure</a>* m);
00152       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d8">moveCursor</a>();
00153       <a class="code" href="classNote.html">Note</a>* <a class="code" href="classScore.html#d9">getSelectedNote</a>();
00154       <a class="code" href="classNote.html">Note</a>* <a class="code" href="classScore.html#d10">searchTieNote</a>(<a class="code" href="classNote.html">Note</a>* note, <a class="code" href="classSegment.html">Segment</a>* segment, <span class="keywordtype">int</span> track);
00155       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d11">addAttribute</a>(<a class="code" href="classNote.html">Note</a>*, <a class="code" href="classNoteAttribute.html">NoteAttribute</a>* atr);
00156       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d12">addAccidental</a>(<a class="code" href="classNote.html">Note</a>* oNote, <span class="keywordtype">int</span> prefix);
00157       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d13">pageNext</a>();
00158       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d14">pagePrev</a>();
00159       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d15">pageTop</a>();
00160       <span class="keywordtype">void</span> <a class="code" href="classScore.html#d16">pageEnd</a>();
00161       <a class="code" href="classNote.html">Note</a>* <a class="code" href="classScore.html#d17">upAlt</a>(<a class="code" href="classElement.html">Element</a>*);
00162       <a class="code" href="classNote.html">Note</a>* <a class="code" href="classScore.html#d18">upAltCtrl</a>(<a class="code" href="classNote.html">Note</a>*) const;
00163       <a class="code" href="classNote.html">Note</a>* downAlt(<a class="code" href="classElement.html">Element</a>*);
00164       <a class="code" href="classNote.html">Note</a>* downAltCtrl(<a class="code" href="classNote.html">Note</a>*) const;
00165       Element* moveUp(<a class="code" href="classNote.html">Note</a>*);
00166       Element* moveDown(Note*);
00167 
00168    public:
<a name="l00169"></a><a class="code" href="classScore.html#o0">00169</a>       Element* textList;            <span class="comment">// list of all used text objects</span>
<a name="l00170"></a><a class="code" href="classScore.html#o1">00170</a>       QString projectName;
<a name="l00171"></a><a class="code" href="classScore.html#o2">00171</a>       <span class="keywordtype">bool</span> dirty;                   <span class="comment">// score data was modified</span>
<a name="l00172"></a><a class="code" href="classScore.html#o3">00172</a>       <span class="keywordtype">bool</span> saved;                   <span class="comment">// true if project was already saved; only on first</span>
00173                                     <span class="comment">// save a backup file will be created, subsequent</span>
00174                                     <span class="comment">// saves will not overwrite the backup file</span>
<a name="l00175"></a><a class="code" href="classScore.html#o4">00175</a>       <span class="keywordtype">bool</span> newScore;
00176 
00177       <span class="comment">//---------------------------------------------------</span>
00178       <span class="comment">//    input data for layout():</span>
00179       <span class="comment">//---------------------------------------------------</span>
00180 
<a name="l00181"></a><a class="code" href="classScore.html#o5">00181</a>       QString movementNumber;
<a name="l00182"></a><a class="code" href="classScore.html#o6">00182</a>       QString movementTitle;
<a name="l00183"></a><a class="code" href="classScore.html#o7">00183</a>       QString rights;
00184 
<a name="l00185"></a><a class="code" href="classScore.html#o8">00185</a>       <span class="keywordtype">int</span> _pageOffset;              <span class="comment">// offset for page numbers</span>
00186 
<a name="l00187"></a><a class="code" href="classScore.html#o9">00187</a>       <a class="code" href="classSigList.html">SigList</a>*   sigmap;
<a name="l00188"></a><a class="code" href="classScore.html#o10">00188</a>       <a class="code" href="classKeyList.html">KeyList</a>*   keymap;
<a name="l00189"></a><a class="code" href="classScore.html#o11">00189</a>       <a class="code" href="classTempoList.html">TempoList</a>* tempomap;
00190 
00191       <span class="comment">//---------------------------------------------------</span>
00192       <span class="comment">//    generated by layout():</span>
00193       <span class="comment">//---------------------------------------------------</span>
00194 
<a name="l00195"></a><a class="code" href="classScore.html#o12">00195</a>       <a class="code" href="classPageList.html">PageList</a>* pages;        <span class="comment">// pages are build from systems</span>
<a name="l00196"></a><a class="code" href="classScore.html#o13">00196</a>       <a class="code" href="classSystemList.html">SystemList</a>* systems;    <span class="comment">// measures are akkumulated to systems</span>
00197 
00198 
00199       <span class="comment">//---------------------------------------------------</span>
00200       <span class="comment">//    state information</span>
00201       <span class="comment">//---------------------------------------------------</span>
00202 
<a name="l00203"></a><a class="code" href="classScore.html#o14">00203</a>       <a class="code" href="classSelection.html">Selection</a>* sel;
00204 
<a name="l00205"></a><a class="code" href="classScore.html#o15">00205</a>       Element* origEditObject;
<a name="l00206"></a><a class="code" href="classScore.html#o16">00206</a>       Element* editObject;
00207 
<a name="l00208"></a><a class="code" href="classScore.html#o17">00208</a>       <a class="code" href="classSystem.html">System</a>* dragSystem;     <span class="comment">// valid if DRAG_STAFF</span>
<a name="l00209"></a><a class="code" href="classScore.html#o18">00209</a>       <span class="keywordtype">int</span> dragStaff;
00210 
00211    public slots:
00212       <span class="keywordtype">void</span> printFile();
00213       <span class="keywordtype">void</span> cmdAddTitle();
00214       <span class="keywordtype">void</span> cmdAddSubTitle();
00215       <span class="keywordtype">void</span> cmdAddComposer();
00216       <span class="keywordtype">void</span> cmdAddPoet();
00217       <span class="keywordtype">void</span> cmdAppendMeasure();
00218       <span class="keywordtype">void</span> keyPadToggle(<span class="keywordtype">int</span> key);
00219       <span class="keywordtype">void</span> padToggle(<span class="keywordtype">int</span> n);
00220       <span class="keywordtype">void</span> doUndo();
00221       <span class="keywordtype">void</span> doRedo();
00222 
00223       <span class="keywordtype">void</span> addLyrics();
00224       <span class="keywordtype">void</span> addTempo();
00225       <span class="keywordtype">void</span> addTechnik();
00226       <span class="keywordtype">void</span> addMetronome();
00227       <span class="keywordtype">void</span> addExpression();
00228 
00229       <span class="keywordtype">void</span> startNoteEntry();
00230       <span class="keywordtype">void</span> cmdAddPitch(<span class="keywordtype">int</span>);
00231       <span class="keywordtype">void</span> cmdAddIntervall(<span class="keywordtype">int</span>);
00232       <span class="keywordtype">void</span> cmdNTole(<span class="keywordtype">int</span>);
00233       <span class="keywordtype">void</span> midiReceived();
00234       <span class="keywordtype">void</span> resetUserOffsets();
00235       <span class="keywordtype">void</span> resetUserStretch();
00236 
00237       <span class="keywordtype">void</span> pageBreak();
00238       <span class="keywordtype">void</span> systemBreak();
00239       <span class="keywordtype">void</span> paletteSelected(Element* obj);
00240       <span class="keywordtype">void</span> textStyleChanged();
00241 
00242    signals:
00243       <span class="keywordtype">void</span> selectionChanged(<span class="keywordtype">int</span>);
00244       <span class="keywordtype">void</span> padChanged(<span class="keywordtype">bool</span>, <span class="keywordtype">int</span>);
00245 
00246    public:
00247       <a class="code" href="classScore.html">Score</a>();
00248       ~Score();
00249 
00250       <span class="keywordtype">void</span> clear();
00251       <span class="keywordtype">void</span> write(<a class="code" href="classXml.html">Xml</a>&amp;);
00252       <span class="keywordtype">void</span> readStaff(QDomNode);
00253 
<a name="l00254"></a><a class="code" href="classScore.html#a5">00254</a>       <a class="code" href="classStaffList.html">StaffList</a>* staves()<span class="keyword"> const     </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r17">_staves</a>; }
00255       <span class="keywordtype">int</span> <a class="code" href="classScore.html#a6">nstaves</a>() const;
00256       <span class="keywordtype">int</span> staff(const <a class="code" href="classPart.html">Part</a>*) const;
00257       <span class="keywordtype">int</span> staff(const <a class="code" href="classStaff.html">Staff</a>*) const;
00258       <a class="code" href="classStaff.html">Staff</a>* staff(<span class="keywordtype">int</span> n) const;
00259       <span class="keywordtype">bool</span> noStaves() const;
00260 
00261       <span class="keywordtype">void</span> cmdInsertPart(<a class="code" href="classPart.html">Part</a>*, <span class="keywordtype">int</span>);
00262       <span class="keywordtype">void</span> insertPart(Part*, <span class="keywordtype">int</span>);
00263       <span class="keywordtype">void</span> cmdRemovePart(Part*);
00264       <span class="keywordtype">void</span> removePart(Part*);
00265       <span class="keywordtype">void</span> insertStaff(<a class="code" href="classStaff.html">Staff</a>*, <span class="keywordtype">int</span>);
00266       <span class="keywordtype">void</span> removeStaff(Staff*);
00267 
00268       Part* part(<span class="keywordtype">int</span> staff);
00269 
00270       <span class="keywordtype">void</span> addMeasure(<a class="code" href="classMeasure.html">Measure</a>*);
00271       <span class="keywordtype">void</span> removeMeasure(<span class="keywordtype">int</span> tick);
00272       <span class="keywordtype">void</span> setInstrumentNames();
00273 
00274       Measure* pos2measure(const QPointF&amp;, <span class="keywordtype">int</span>* tick, Staff** staff, <span class="keywordtype">int</span>* pitch,
00275          <a class="code" href="classSegment.html">Segment</a>**, QPointF* offset) const;
00276       Measure* pos2measure2(const QPointF&amp;, <span class="keywordtype">int</span>* tick, Staff** staff, <span class="keywordtype">int</span>* pitch, Segment**) const;
00277       <span class="keywordtype">int</span> y2pitch(<span class="keywordtype">double</span> y, Staff* staff, <span class="keywordtype">int</span> tick) const;
00278       <span class="keywordtype">int</span> line2pitch(<span class="keywordtype">int</span> line, <span class="keywordtype">int</span> staff, <span class="keywordtype">int</span> tick) const;
00279       <a class="code" href="classPage.html">Page</a>* addPage();
00280       <span class="keywordtype">void</span> readGeometry(QDomNode);
00281       <span class="keywordtype">int</span> snap(<span class="keywordtype">int</span> tick, const QPointF) const;
00282       <span class="keywordtype">int</span> snapNote(<span class="keywordtype">int</span> tick, const QPointF, <span class="keywordtype">int</span> staff) const;
00283 
00284       <span class="keywordtype">void</span> addViewer(<a class="code" href="classViewer.html">Viewer</a>* v);
00285       <span class="keywordtype">void</span> clearViewer();
00286 
00287       <span class="keywordtype">void</span> startUndo();
00288       <span class="keywordtype">void</span> endUndo();
00289       <span class="keywordtype">void</span> undoOp(std::<a class="code" href="classstd_1_1list.html">list</a>&lt;<span class="keywordtype">int</span>&gt; si, std::<a class="code" href="classstd_1_1list.html">list</a>&lt;<span class="keywordtype">int</span>&gt; di);
00290       <span class="keywordtype">void</span> undoOp(<a class="code" href="structUndoOp.html">UndoOp</a>::UndoType type, Measure* m);
00291       <span class="keywordtype">void</span> undoOp(<a class="code" href="structUndoOp.html">UndoOp</a>::UndoType type, Measure* m, <a class="code" href="structMStaff.html">MStaff</a> s, <span class="keywordtype">int</span> staff);
00292       <span class="keywordtype">void</span> undoOp(<a class="code" href="structUndoOp.html">UndoOp</a>::UndoType type, Staff* staff, <span class="keywordtype">int</span> idx);
00293       <span class="keywordtype">void</span> undoOp(<a class="code" href="structUndoOp.html">UndoOp</a>::UndoType type, Part* part, <span class="keywordtype">int</span> idx);
00294       <span class="keywordtype">void</span> undoOp(<a class="code" href="structUndoOp.html">UndoOp</a>::UndoType type, Segment* seg, <span class="keywordtype">int</span> staff);
00295       <span class="keywordtype">void</span> undoOp(<a class="code" href="structUndoOp.html">UndoOp</a>::UndoType type, <a class="code" href="classElement.html">Element</a>* object);
00296 
00297       <span class="keywordtype">void</span> keyPressEvent(QKeyEvent*);
00298       <span class="keywordtype">void</span> setNote(<span class="keywordtype">int</span> tick, Staff* staff, <span class="keywordtype">int</span> voice, <span class="keywordtype">int</span> pitch, <span class="keywordtype">int</span> len);
00299       <span class="keywordtype">int</span> clefPitchOffset(<span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> staffIdx) const;
00300       <span class="keywordtype">int</span> clefOffset(<span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> staffIdx) const;
00301       <a class="code" href="classRest.html">Rest</a>* setRest(<span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> staff, <span class="keywordtype">int</span> voice, Measure*);
00302       <span class="keywordtype">void</span> setRest(<span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> staff, <span class="keywordtype">int</span> voice, <span class="keywordtype">int</span> len);
00303       <a class="code" href="classCanvas.html">Canvas</a>* canvas() const;
00304       <span class="keywordtype">void</span> select(<a class="code" href="classElement.html">Element</a>* obj, <span class="keywordtype">int</span> state, <span class="keywordtype">int</span> staff);
00305       <span class="keywordtype">void</span> searchSelectedElements();
<a name="l00306"></a><a class="code" href="classScore.html#a49">00306</a>       <span class="keywordtype">void</span> layout() { <a class="code" href="classScore.html#r3">updateAll</a> = <span class="keyword">true</span>; <a class="code" href="classScore.html#r2">_needLayout</a> = <span class="keyword">true</span>; }
<a name="l00307"></a><a class="code" href="classScore.html#a50">00307</a>       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#a50">needLayout</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r2">_needLayout</a>; }
00308       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a51">doLayout</a>();
00309       <span class="keywordtype">bool</span> layoutPage(<a class="code" href="classPage.html">Page</a>*, <a class="code" href="classMeasure.html">Measure</a>*&amp;, <a class="code" href="classpstl_1_1plist.html">iSystem</a>&amp;);
00310       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a53">layout1</a>();
00311       <span class="keywordtype">bool</span> layoutPage1(<a class="code" href="classPage.html">Page</a>*, <a class="code" href="classpstl_1_1plist.html">iSystem</a>&amp;);
00312       <span class="keywordtype">void</span> cmdAddText(<span class="keywordtype">int</span> style);
00313       <span class="keywordtype">void</span> cmdUpDown(<span class="keywordtype">bool</span> up, <span class="keywordtype">bool</span> octave);
00314       <a class="code" href="classElement.html">Element</a>* searchNote(<span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> staffIdx) <span class="keyword">const</span>;
00315 
00316       <span class="comment">// undo/redo ops</span>
00317       <span class="keywordtype">void</span> endUndoRedo(<a class="code" href="structUndo.html">Undo</a>*);
00318       <span class="keywordtype">void</span> addObjectToSelected(<a class="code" href="classElement.html">Element</a>*);
00319 
00320       <span class="keywordtype">void</span> addObject(<a class="code" href="classElement.html">Element</a>*);
00321       <span class="keywordtype">void</span> removeObject(<a class="code" href="classElement.html">Element</a>*);
00322 
00323       <a class="code" href="classElement.html">Element</a>* addClef(<a class="code" href="classClef.html">Clef</a>*);
00324       <a class="code" href="classElement.html">Element</a>* addTimeSig(<a class="code" href="classTimeSig.html">TimeSig</a>*, <span class="keyword">const</span> QPointF&amp;);
00325       <a class="code" href="classElement.html">Element</a>* addKeySig(<a class="code" href="classKeySig.html">KeySig</a>*, <span class="keyword">const</span> QPointF&amp;);
00326       <a class="code" href="classElement.html">Element</a>* addDynamic(<a class="code" href="classDynamic.html">Dynamic</a>* atr, <span class="keyword">const</span> QPointF&amp; pos);
00327       <a class="code" href="classElement.html">Element</a>* addHairpin(<a class="code" href="classHairpin.html">Hairpin</a>* atr, <span class="keyword">const</span> QPointF&amp; pos);
00328       <a class="code" href="classElement.html">Element</a>* addSlur(<a class="code" href="classSlur.html">Slur</a>* atr, <span class="keyword">const</span> QPointF&amp; pos);
00329       <a class="code" href="classNote.html">Note</a>* addNote(<a class="code" href="classChord.html">Chord</a>*, <span class="keywordtype">int</span> pitch);
00330 
00331       <span class="comment">// menu entry:</span>
00332       <span class="keywordtype">void</span> addBar(<a class="code" href="classBar.html">Bar</a>*, <a class="code" href="classMeasure.html">Measure</a>*);
00333 
00334       <span class="comment">// keyboard entry:</span>
00335       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a70">cmdAddSlur</a>();
00336       <span class="keywordtype">void</span> cmdAddHairpin(<span class="keywordtype">bool</span>);
00337 
00338       <span class="keywordtype">void</span> removeClef(<a class="code" href="classClef.html">Clef</a>*);
00339       <span class="keywordtype">void</span> deleteItem(<a class="code" href="classElement.html">Element</a>*);
00340       <span class="keywordtype">void</span> cmdDeleteItem(<a class="code" href="classElement.html">Element</a>*);
00341       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a75">cmdDeleteSelection</a>();
00342       <a class="code" href="classElement.html">Element</a>* cmdAddElement(<a class="code" href="classElement.html">Element</a>* obj, <span class="keyword">const</span> QPointF&amp; pos);
00343       <span class="keywordtype">void</span> toggleInvisible(<a class="code" href="classElement.html">Element</a>* obj);
00344 
00345       <span class="keywordtype">void</span> changeRest(<a class="code" href="classRest.html">Rest</a>* rest, <span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> len);
00346       <span class="keywordtype">void</span> changeStaff(<a class="code" href="classStaff.html">Staff</a>* staff, <span class="keywordtype">int</span> idx);
00347 
00348       <span class="keywordtype">void</span> putNote(<span class="keyword">const</span> QPointF&amp; pos, <span class="keywordtype">bool</span> addToChord);
00349       <span class="keywordtype">void</span> setKeyPad(<span class="keywordtype">bool</span> val, <span class="keywordtype">int</span> idx);
00350       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a82">setPadState</a>();
00351 
00352       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a83">startCmd</a>();
00353       <span class="keywordtype">void</span> endCmd(<span class="keywordtype">bool</span> undo);
00354 
<a name="l00355"></a><a class="code" href="classScore.html#a85">00355</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a85">setUpdateAll</a>()            { <a class="code" href="classScore.html#r3">updateAll</a> = <span class="keyword">true</span>; }
<a name="l00356"></a><a class="code" href="classScore.html#a86">00356</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a86">addRefresh</a>(<span class="keyword">const</span> QRectF&amp; r) { <a class="code" href="classScore.html#r1">refresh</a> |= r; }
00357       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a87">lyricsTab</a>();
00358 
00359       <span class="keywordtype">void</span> startEdit(<a class="code" href="classElement.html">Element</a>* element);
00360       <span class="keywordtype">bool</span> edit(QKeyEvent* ev);
00361       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a90">endEdit</a>();
00362 
00363       <span class="keywordtype">void</span> paste(<span class="keyword">const</span> <a class="code" href="classElement.html">Element</a>*, <span class="keyword">const</span> QPointF&amp;);
00364 
00365       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a92">startDrag</a>();
00366       <span class="keywordtype">void</span> drag(<span class="keyword">const</span> QPointF&amp;);
00367       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a94">endDrag</a>();
00368 
00369       <span class="keywordtype">void</span> dragEdit(QMatrix&amp;, QPointF* startMove, <span class="keyword">const</span> QPointF&amp; delta);
00370       <span class="keywordtype">void</span> layoutPageHeader(<a class="code" href="classPage.html">Page</a>*);
00371 
00372       <span class="keywordtype">void</span> changeVoice(<span class="keywordtype">int</span>);
00373       <span class="keywordtype">void</span> setNoteEntry(<span class="keywordtype">bool</span> on, <span class="keywordtype">bool</span> step);
00374       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a99">connectTies</a>();
00375 
<a name="l00376"></a><a class="code" href="classScore.html#a100">00376</a>       <a class="code" href="classMeasure.html">Measure</a>* <a class="code" href="classScore.html#a100">first</a>()<span class="keyword"> const         </span>{ <span class="keywordflow">return</span> (<a class="code" href="classMeasure.html">Measure</a>*)<a class="code" href="classScore.html#r15">_measures</a>.<a class="code" href="classElemList.html#a1">first</a>(); }
<a name="l00377"></a><a class="code" href="classScore.html#a101">00377</a>       <a class="code" href="classMeasure.html">Measure</a>* <a class="code" href="classScore.html#a101">last</a>()  const         { <span class="keywordflow">return</span> (<a class="code" href="classMeasure.html">Measure</a>*)<a class="code" href="classScore.html#r15">_measures</a>.<a class="code" href="classElemList.html#a2">last</a>();  }
<a name="l00378"></a><a class="code" href="classScore.html#a102">00378</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a102">push_back</a>(<a class="code" href="classMeasure.html">Measure</a>* el)    { <a class="code" href="classScore.html#r15">_measures</a>.<a class="code" href="classElemList.html#a4">push_back</a>((<a class="code" href="classElement.html">Element</a>*)el);            }
00379 
<a name="l00380"></a><a class="code" href="classScore.html#a103">00380</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classScore.html#a103">paletteObject</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r9">_paletteObject</a>; }
00381       <span class="keywordtype">void</span> colorItem(<a class="code" href="classElement.html">Element</a>*);
00382       <span class="keywordtype">void</span> adjustCanvasPosition(<a class="code" href="classElement.html">Element</a>*);
<a name="l00383"></a><a class="code" href="classScore.html#a106">00383</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classScore.html#a106">dragObject</a>()<span class="keyword"> const    </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r12">_dragObject</a>; }
<a name="l00384"></a><a class="code" href="classScore.html#a107">00384</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a107">setDragObject</a>(<a class="code" href="classElement.html">Element</a>* e) { <a class="code" href="classScore.html#r12">_dragObject</a> = e; }
00385       <span class="keywordtype">void</span> midiNoteReceived(<span class="keywordtype">int</span> pitch, <span class="keywordtype">bool</span>);
<a name="l00386"></a><a class="code" href="classScore.html#a109">00386</a>       <a class="code" href="classPartList.html">PartList</a>* <a class="code" href="classScore.html#a109">parts</a>()             { <span class="keywordflow">return</span> <a class="code" href="classScore.html#r16">_parts</a>; }
00387       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a110">updateStaffIndex</a>();
00388       <span class="keywordtype">void</span> sortStaves(std::list&lt;int&gt; src, std::list&lt;int&gt; dst);
00389       <span class="keywordtype">void</span> read(QString name);
00390 
<a name="l00391"></a><a class="code" href="classScore.html#a113">00391</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a113">setSpatium</a>(<span class="keywordtype">double</span> v)  {
00392             <a class="code" href="classScore.html#r7">scoreLayout</a>.<a class="code" href="classScoreLayout.html#o0">_spatium</a> = v;
00393             ::_spatium = v;
00394             }
<a name="l00395"></a><a class="code" href="classScore.html#a114">00395</a>       <span class="keywordtype">double</span> <a class="code" href="classScore.html#a114">spatium</a>()<span class="keyword"> const     </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r7">scoreLayout</a>.<a class="code" href="classScoreLayout.html#o0">_spatium</a>; }
00396 
<a name="l00397"></a><a class="code" href="classScore.html#a115">00397</a>       <span class="keywordtype">double</span> <a class="code" href="classScore.html#a115">mag</a>()<span class="keyword"> const         </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r6">scoreView</a>.<a class="code" href="classScoreView.html#o0">_mag</a>;     }
<a name="l00398"></a><a class="code" href="classScore.html#a116">00398</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a116">setMag</a>(<span class="keywordtype">double</span> val)    { <a class="code" href="classScore.html#r6">scoreView</a>.<a class="code" href="classScoreView.html#o0">_mag</a> = val;      }
<a name="l00399"></a><a class="code" href="classScore.html#a117">00399</a>       qreal <a class="code" href="classScore.html#a117">xoffset</a>()<span class="keyword"> const      </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r6">scoreView</a>.<a class="code" href="classScoreView.html#o1">_xoffset</a>; }
<a name="l00400"></a><a class="code" href="classScore.html#a118">00400</a>       qreal <a class="code" href="classScore.html#a118">yoffset</a>()<span class="keyword"> const      </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r6">scoreView</a>.<a class="code" href="classScoreView.html#o2">_yoffset</a>; }
<a name="l00401"></a><a class="code" href="classScore.html#a119">00401</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a119">setXoffset</a>(qreal val) { <a class="code" href="classScore.html#r6">scoreView</a>.<a class="code" href="classScoreView.html#o1">_xoffset</a> = val;  }
<a name="l00402"></a><a class="code" href="classScore.html#a120">00402</a>       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a120">setYoffset</a>(qreal val) { <a class="code" href="classScore.html#r6">scoreView</a>.<a class="code" href="classScoreView.html#o2">_yoffset</a> = val;  }
00403 
<a name="l00404"></a><a class="code" href="classScore.html#a121">00404</a>       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#a121">showInvisible</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r8">_showInvisible</a>; }
00405 
00406       <span class="keywordtype">bool</span> loadMsc(QString name);
00407       <span class="keywordtype">bool</span> loadFile(FILE* f, <span class="keyword">const</span> QString&amp; name);
00408       <span class="keywordtype">void</span> importMusicXml(<span class="keyword">const</span> QString&amp;);
00409       <span class="keywordtype">void</span> convertMidi(<a class="code" href="classMidiFile.html">MidiFile</a>*);
00410       <span class="keywordtype">void</span> importMidi(<span class="keyword">const</span> QString&amp; name);
00411       <a class="code" href="classChordRest.html">ChordRest</a>* getSelectedChordRest(QWidget* parent);
00412       <a class="code" href="classMeasure.html">Measure</a>* <a class="code" href="undo_8cpp.html#a3">tick2measure</a>(<span class="keywordtype">int</span> tick);
00413       <a class="code" href="classSegment.html">Segment</a>* tick2segment(<span class="keywordtype">int</span> tick);
00414       QPointF tick2pos(<span class="keywordtype">int</span> tick, <span class="keywordtype">int</span> <span class="comment">/*staff*/</span>);
00415       <span class="keywordtype">void</span> <a class="code" href="classScore.html#a131">fixTicks</a>();
00416       <a class="code" href="classElement.html">Element</a>* findSelectableElement(<span class="keyword">const</span> QPointF&amp; pp);
00417       <span class="keywordtype">bool</span> <a class="code" href="classScore.html#a133">undoEmpty</a>() const;
00418       <span class="keywordtype">bool</span> redoEmpty() const;
<a name="l00419"></a><a class="code" href="classScore.html#a135">00419</a>       <a class="code" href="structPageFormat.html">PageFormat</a>* pageFormat()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classScore.html#r7">scoreLayout</a>.<a class="code" href="classScoreLayout.html#o1">pageFormat</a>; }
00420       };
00421 
00422 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="project_8h.html#a9">setPadState</a>(<a class="code" href="classElement.html">Element</a>*);
00423 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="project_8h.html#a10">fixTicks</a>();
00424 
00425 <span class="preprocessor">#endif</span>
00426 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:29 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
