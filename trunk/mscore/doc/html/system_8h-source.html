<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: system.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>system.h</h1><a href="system_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MusE Score</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: system.h,v 1.13 2005/06/27 19:50:39 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2002-2004 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#ifndef __SYSTEM_H__</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#define __SYSTEM_H__</span>
00011 <span class="preprocessor"></span>
00012 <span class="preprocessor">#include "<a class="code" href="element_8h.html">element.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="spatium_8h.html">spatium.h</a>"</span>
00014 
00015 <span class="keyword">class </span><a class="code" href="classStaff.html">Staff</a>;
00016 <span class="keyword">class </span><a class="code" href="classSStaff.html">SStaff</a>;
00017 <span class="keyword">class </span><a class="code" href="classBar.html">Bar</a>;
00018 <span class="keyword">class </span><a class="code" href="classClef.html">Clef</a>;
00019 <span class="keyword">class </span><a class="code" href="classPage.html">Page</a>;
00020 <span class="keyword">class </span><a class="code" href="classSText.html">SText</a>;
00021 <span class="keyword">class </span><a class="code" href="classPainter.html">Painter</a>;
00022 <span class="keyword">class </span><a class="code" href="classMeasureList.html">MeasureList</a>;
00023 
00024 <span class="comment">//---------------------------------------------------------</span>
00025 <span class="comment">//   SysStaff</span>
00026 <span class="comment">//    one staff of a system</span>
00027 <span class="comment">//---------------------------------------------------------</span>
00028 
<a name="l00029"></a><a class="code" href="classSysStaff.html">00029</a> <span class="keyword">class </span><a class="code" href="classSysStaff.html">SysStaff</a> {
<a name="l00030"></a><a class="code" href="classSysStaff.html#r0">00030</a>       QRectF <a class="code" href="classSysStaff.html#r0">_bbox</a>;   <span class="comment">// bbox of SStaff</span>
<a name="l00031"></a><a class="code" href="classSysStaff.html#r1">00031</a>       <a class="code" href="classSpatium.html">Spatium</a> <a class="code" href="classSysStaff.html#r1">_distance</a>;
00032 
00033    <span class="keyword">public</span>:
<a name="l00034"></a><a class="code" href="classSysStaff.html#o0">00034</a>       <span class="keywordtype">int</span> <a class="code" href="classSysStaff.html#o0">idx</a>;
<a name="l00035"></a><a class="code" href="classSysStaff.html#o1">00035</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classSysStaff.html#o1">klammer</a>;
<a name="l00036"></a><a class="code" href="classSysStaff.html#o2">00036</a>       <a class="code" href="classSStaff.html">SStaff</a>*  <a class="code" href="classSysStaff.html#o2">sstaff</a>;
<a name="l00037"></a><a class="code" href="classSysStaff.html#o3">00037</a>       <a class="code" href="classSText.html">SText</a>* <a class="code" href="classSysStaff.html#o3">instrumentName</a>;
00038 
<a name="l00039"></a><a class="code" href="classSysStaff.html#a0">00039</a>       <span class="keyword">const</span> QRectF&amp; <a class="code" href="classSysStaff.html#a0">bbox</a>()<span class="keyword"> const       </span>{ <span class="keywordflow">return</span> <a class="code" href="classSysStaff.html#r0">_bbox</a>; }
<a name="l00040"></a><a class="code" href="classSysStaff.html#a1">00040</a>       <span class="keywordtype">void</span> <a class="code" href="classSysStaff.html#a1">setbbox</a>(<span class="keyword">const</span> QRectF&amp; r)    { <a class="code" href="classSysStaff.html#r0">_bbox</a> = r; }
00041       <span class="keywordtype">void</span> move(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y);
00042 
<a name="l00043"></a><a class="code" href="classSysStaff.html#a3">00043</a>       <span class="keywordtype">double</span> <a class="code" href="classSysStaff.html#a3">distance</a>()<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> point(<a class="code" href="classSysStaff.html#r1">_distance</a>); }
<a name="l00044"></a><a class="code" href="classSysStaff.html#a4">00044</a>       <span class="keywordtype">void</span> <a class="code" href="classSysStaff.html#a4">setDistance</a>(<span class="keywordtype">double</span> v)     { <a class="code" href="classSysStaff.html#r1">_distance</a>.<a class="code" href="classSpatium.html#a4">set</a>(v); }
00045 
00046       <a class="code" href="classSysStaff.html#a5">SysStaff</a>();
00047       <a class="code" href="classSysStaff.html#a6">~SysStaff</a>();
00048       };
00049 
<a name="l00050"></a><a class="code" href="system_8h.html#a0">00050</a> <span class="keyword">typedef</span> std::vector&lt;SysStaff*&gt; <a class="code" href="system_8h.html#a0">SysStaffList</a>;
<a name="l00051"></a><a class="code" href="system_8h.html#a1">00051</a> <span class="keyword">typedef</span> SysStaffList::iterator <a class="code" href="system_8h.html#a1">iSysStaff</a>;
<a name="l00052"></a><a class="code" href="system_8h.html#a2">00052</a> <span class="keyword">typedef</span> SysStaffList::const_iterator <a class="code" href="system_8h.html#a2">ciSysStaff</a>;
00053 
00054 <span class="comment">//---------------------------------------------------------</span>
00055 <span class="comment">//   System</span>
00056 <span class="comment">//    one row of measures for all instruments;</span>
00057 <span class="comment">//    a complete piece of the timeline</span>
00058 <span class="comment">//---------------------------------------------------------</span>
00059 
<a name="l00060"></a><a class="code" href="classSystem.html">00060</a> <span class="keyword">class </span><a class="code" href="classSystem.html">System</a> : <span class="keyword">public</span> <a class="code" href="classElement.html">Element</a> {
<a name="l00061"></a><a class="code" href="classSystem.html#r0">00061</a>       <a class="code" href="classMeasureList.html">MeasureList</a>* <a class="code" href="classSystem.html#r0">ml</a>;
<a name="l00062"></a><a class="code" href="classSystem.html#r1">00062</a>       <a class="code" href="system_8h.html#a0">SysStaffList</a> <a class="code" href="classSystem.html#r1">_staves</a>;
<a name="l00063"></a><a class="code" href="classSystem.html#r2">00063</a>       <a class="code" href="classBar.html">Bar</a>* <a class="code" href="classSystem.html#r2">bar</a>;               <span class="comment">// left hand bar; connects staves in system</span>
00064       <span class="keywordtype">void</span> <a class="code" href="classSystem.html#d0">setInstrumentName</a>(<span class="keywordtype">int</span> staff);
00065 
00066    <span class="keyword">public</span>:
00067       <a class="code" href="classSystem.html">System</a>(<a class="code" href="classScore.html">Score</a>*);
00068       <a class="code" href="classSystem.html#a1">~System</a>();
<a name="l00069"></a><a class="code" href="classSystem.html#a2">00069</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classSystem.html#a2">clone</a>()<span class="keyword"> const             </span>{ <span class="keywordflow">return</span> 0; }
00070 
00071       <span class="keyword">virtual</span> <span class="keywordtype">void</span> add(<a class="code" href="classElement.html">Element</a>*);
00072       <span class="keyword">virtual</span> <span class="keywordtype">void</span> remove(<a class="code" href="classElement.html">Element</a>*);
00073 
<a name="l00074"></a><a class="code" href="classSystem.html#a5">00074</a>       <a class="code" href="classPage.html">Page</a>* <a class="code" href="classSystem.html#a5">page</a>()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> (<a class="code" href="classPage.html">Page</a>*)<a class="code" href="classElement.html#a10">parent</a>(); }
00075 
00076       <span class="keywordtype">void</span> <a class="code" href="classElement.html#a66">layout</a>(<span class="keyword">const</span> QPointF&amp;, <span class="keywordtype">double</span>);
00077       <span class="keywordtype">void</span> <a class="code" href="classSystem.html#a7">layout2</a>();                     <span class="comment">// called after Measure layout</span>
00078       <span class="keywordtype">void</span> <a class="code" href="classSystem.html#a8">clear</a>();                       <span class="comment">// clear measure list</span>
00079 
00080       <span class="keywordtype">void</span> <a class="code" href="classSystem.html#a9">layoutY</a>();
00081 
<a name="l00082"></a><a class="code" href="classSystem.html#a10">00082</a>       <a class="code" href="classMeasureList.html">MeasureList</a>* <a class="code" href="classSystem.html#a10">measures</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classSystem.html#r0">ml</a>; }
00083 
00084       <span class="keyword">const</span> QRectF&amp; bboxStaff(<span class="keywordtype">int</span> staff) <span class="keyword">const</span>;
<a name="l00085"></a><a class="code" href="classSystem.html#a12">00085</a>       <a class="code" href="system_8h.html#a0">SysStaffList</a>* <a class="code" href="classSystem.html#a12">staves</a>()               { <span class="keywordflow">return</span> &amp;<a class="code" href="classSystem.html#r1">_staves</a>; }
<a name="l00086"></a><a class="code" href="classSystem.html#a13">00086</a>       <a class="code" href="classSysStaff.html">SysStaff</a>* <a class="code" href="classElement.html#a59">staff</a>(<span class="keywordtype">int</span> n)               { <span class="keywordflow">return</span> <a class="code" href="classSystem.html#r1">_staves</a>[n]; }
00087 
00088       <span class="keywordtype">double</span> distance(<span class="keywordtype">int</span> n) <span class="keyword">const</span>;
<a name="l00089"></a><a class="code" href="classSystem.html#a15">00089</a>       <span class="keywordtype">void</span> <a class="code" href="classSystem.html#a15">setDistance</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">double</span> v)    { <a class="code" href="classSystem.html#r1">_staves</a>[n]-&gt;setDistance(v);       }
00090 
00091       <a class="code" href="classSysStaff.html">SysStaff</a>* insertStaff(<a class="code" href="classStaff.html">Staff</a>*, <span class="keywordtype">int</span>);
00092       <span class="keywordtype">void</span> insertSysStaff(<a class="code" href="classSysStaff.html">SysStaff</a>*, <span class="keywordtype">int</span>);
00093       <a class="code" href="classSysStaff.html">SysStaff</a>* removeStaff(<span class="keywordtype">int</span>);
00094 
00095       <a class="code" href="classSpatium.html">Spatium</a> <a class="code" href="classSystem.html#a19">minWidth</a>() const;
00096 
00097       virtual <span class="keywordtype">void</span> draw(<a class="code" href="classPainter.html">Painter</a>&amp;) const;
00098 
<a name="l00099"></a><a class="code" href="classSystem.html#a21">00099</a>       <a class="code" href="classBar.html">Bar</a>* getBar()<span class="keyword"> const                </span>{ <span class="keywordflow">return</span> <a class="code" href="classSystem.html#r2">bar</a>; }
00100       <span class="keywordtype">bool</span> pos2tick(<span class="keyword">const</span> QPointF&amp;, <span class="keywordtype">int</span>* tick, <a class="code" href="classStaff.html">Staff</a>** staff, <span class="keywordtype">int</span>* pitch) <span class="keyword">const</span>;
00101       <a class="code" href="classElement.html">Element</a>* findSelectableElement(QPointF p) <span class="keyword">const</span>;
00102       <span class="keywordtype">void</span> <a class="code" href="classSystem.html#a24">setInstrumentNames</a>();
00103       <span class="keywordtype">int</span> snap(<span class="keywordtype">int</span> tick, <span class="keyword">const</span> QPointF p) <span class="keyword">const</span>;
00104       <span class="keywordtype">int</span> snapNote(<span class="keywordtype">int</span> tick, <span class="keyword">const</span> QPointF p, <span class="keywordtype">int</span> staff) <span class="keyword">const</span>;
00105       };
00106 
00107 <span class="comment">//---------------------------------------------------------</span>
00108 <span class="comment">//   SystemList</span>
00109 <span class="comment">//---------------------------------------------------------</span>
00110 
<a name="l00111"></a><a class="code" href="system_8h.html#a3">00111</a> <span class="keyword">typedef</span> <a class="code" href="classpstl_1_1plist.html">pstl::plist&lt;System*&gt;</a>::iterator <a class="code" href="classpstl_1_1plist.html">iSystem</a>;
<a name="l00112"></a><a class="code" href="system_8h.html#a4">00112</a> <span class="keyword">typedef</span> <a class="code" href="classpstl_1_1plist.html">pstl::plist&lt;System*&gt;</a>::const_iterator <a class="code" href="classpstl_1_1plist.html">ciSystem</a>;
<a name="l00113"></a><a class="code" href="system_8h.html#a5">00113</a> <span class="keyword">typedef</span> <a class="code" href="classpstl_1_1plist.html">pstl::plist&lt;System*&gt;</a>::const_reverse_iterator <a class="code" href="classpstl_1_1plist.html">rciSystem</a>;
<a name="l00114"></a><a class="code" href="system_8h.html#a6">00114</a> <span class="keyword">typedef</span> <a class="code" href="classpstl_1_1plist.html">pstl::plist&lt;System*&gt;</a>::reverse_iterator <a class="code" href="classpstl_1_1plist.html">riSystem</a>;
00115 
<a name="l00116"></a><a class="code" href="classSystemList.html">00116</a> <span class="keyword">class </span><a class="code" href="classSystemList.html">SystemList</a> : <span class="keyword">public</span> pstl::plist&lt;System*&gt; {
00117    <span class="keyword">public</span>:
<a name="l00118"></a><a class="code" href="classSystemList.html#a0">00118</a>       <a class="code" href="classSystemList.html#a0">SystemList</a>() {}
00119       };
00120 
00121 <span class="preprocessor">#endif</span>
00122 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:30 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
