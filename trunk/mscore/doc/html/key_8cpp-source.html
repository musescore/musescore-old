<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: key.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>key.cpp</h1><a href="key_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MuseScore</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: key.cpp,v 1.4 2005/04/08 19:37:05 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2002-2004 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#include "<a class="code" href="key_8h.html">key.h</a>"</span>
00010 <span class="preprocessor">#include "<a class="code" href="xml_8h.html">xml.h</a>"</span>
00011 <span class="preprocessor">#include "<a class="code" href="utils_8h.html">utils.h</a>"</span>
00012 
00013 <span class="comment">//---------------------------------------------------------</span>
00014 <span class="comment">//   key</span>
00015 <span class="comment">//---------------------------------------------------------</span>
00016 
<a name="l00017"></a><a class="code" href="classKeyList.html#a1">00017</a> <span class="keywordtype">int</span> <a class="code" href="classKeyList.html#a1">KeyList::key</a>(<span class="keywordtype">int</span> tick)<span class="keyword"> const</span>
00018 <span class="keyword">      </span>{
00019       <span class="keywordflow">if</span> (empty())
00020             <span class="keywordflow">return</span> 0;
00021       <a class="code" href="key_8h.html#a1">ciKeyEvent</a> i = upper_bound(tick);
00022       <span class="keywordflow">if</span> (i == begin())
00023             <span class="keywordflow">return</span> 0;
00024       --i;
00025       <span class="keywordflow">return</span> i-&gt;second;
00026       }
00027 
00028 <span class="comment">//---------------------------------------------------------</span>
00029 <span class="comment">//   KeyList::write</span>
00030 <span class="comment">//---------------------------------------------------------</span>
00031 
<a name="l00032"></a><a class="code" href="classKeyList.html#a4">00032</a> <span class="keywordtype">void</span> <a class="code" href="classKeyList.html#a4">KeyList::write</a>(<a class="code" href="classXml.html">Xml</a>&amp; xml, <span class="keyword">const</span> <span class="keywordtype">char</span>* name)<span class="keyword"> const</span>
00033 <span class="keyword">      </span>{
00034       xml.<a class="code" href="classXml.html#a8">tag</a>(name);
00035       <span class="keywordflow">for</span> (<a class="code" href="key_8h.html#a1">ciKeyEvent</a> i = begin(); i != end(); ++i)
00036             xml.<a class="code" href="classXml.html#a6">put</a>(<span class="stringliteral">"&lt;key tick=\"%d\" idx=\"%d\"/&gt;"</span>, i-&gt;first, i-&gt;second);
00037       xml.<a class="code" href="classXml.html#a9">etag</a>(name);
00038       }
00039 
00040 <span class="comment">//---------------------------------------------------------</span>
00041 <span class="comment">//   KeyList::readKey</span>
00042 <span class="comment">//---------------------------------------------------------</span>
00043 
<a name="l00044"></a><a class="code" href="classKeyList.html#a3">00044</a> <span class="keywordtype">void</span> <a class="code" href="classKeyList.html#a3">KeyList::readKey</a>(QDomNode node)
00045       {
00046       QDomElement e = node.toElement();
00047       <span class="keywordtype">int</span> tick = e.attribute(<span class="stringliteral">"tick"</span>, <span class="stringliteral">"0"</span>).toInt();
00048       <span class="keywordtype">int</span> idx   = e.attribute(<span class="stringliteral">"idx"</span>, <span class="stringliteral">"0"</span>).toInt();
00049       (*this)[tick] = idx;
00050       }
00051 
00052 <span class="comment">//---------------------------------------------------------</span>
00053 <span class="comment">//   KeyList::read</span>
00054 <span class="comment">//---------------------------------------------------------</span>
00055 
<a name="l00056"></a><a class="code" href="classKeyList.html#a2">00056</a> <span class="keywordtype">void</span> <a class="code" href="classKeyList.html#a2">KeyList::read</a>(QDomNode node)
00057       {
00058       node = node.firstChild();
00059       <span class="keywordflow">while</span> (!node.isNull()) {
00060             QDomElement e = node.toElement();
00061             QString tag(e.tagName());
00062             <span class="keywordflow">if</span> (tag == <span class="stringliteral">"key"</span>)
00063                   <a class="code" href="classKeyList.html#a3">readKey</a>(node);
00064             <span class="keywordflow">else</span>
00065                   <a class="code" href="utils_8h.html#a4">domError</a>(node);
00066             node = node.nextSibling();
00067             }
00068       }
00069 
00070 <span class="comment">//---------------------------------------------------------</span>
00071 <span class="comment">//   insert</span>
00072 <span class="comment">//---------------------------------------------------------</span>
00073 
<a name="l00074"></a><a class="code" href="classKeyList.html#a6">00074</a> <span class="keywordtype">void</span> <a class="code" href="classKeyList.html#a6">KeyList::insertTime</a>(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>)
00075       {
00076       printf(<span class="stringliteral">"KeyList::insertTime(): not impl.\n"</span>);
00077       }
00078 
00079 <span class="comment">//---------------------------------------------------------</span>
00080 <span class="comment">//   remove</span>
00081 <span class="comment">//---------------------------------------------------------</span>
00082 
<a name="l00083"></a><a class="code" href="classKeyList.html#a5">00083</a> <span class="keywordtype">void</span> <a class="code" href="classKeyList.html#a5">KeyList::removeTime</a>(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>)
00084       {
00085       printf(<span class="stringliteral">"KeyList::removeTime(): not impl.\n"</span>);
00086       }
00087 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:28 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
