<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: listedit.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>listedit.cpp</h1><a href="listedit_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MuseScore</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: listedit.cpp,v 1.15 2005/06/27 19:50:20 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2005 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#include "<a class="code" href="listedit_8h.html">listedit.h</a>"</span>
00010 <span class="preprocessor">#include "<a class="code" href="mscore_8h.html">mscore.h</a>"</span>
00011 <span class="preprocessor">#include "<a class="code" href="element_8h.html">element.h</a>"</span>
00012 <span class="preprocessor">#include "<a class="code" href="page_8h.html">page.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="segment_8h.html">segment.h</a>"</span>
00014 <span class="preprocessor">#include "<a class="code" href="project_8h.html">project.h</a>"</span>
00015 <span class="preprocessor">#include "<a class="code" href="note_8h.html">note.h</a>"</span>
00016 <span class="preprocessor">#include "<a class="code" href="measure_8h.html">measure.h</a>"</span>
00017 
00018 <span class="comment">//---------------------------------------------------------</span>
00019 <span class="comment">//   startPageListEditor</span>
00020 <span class="comment">//---------------------------------------------------------</span>
00021 
<a name="l00022"></a><a class="code" href="classMuseScore.html#k12">00022</a> <span class="keywordtype">void</span> <a class="code" href="classMuseScore.html#k12">MuseScore::startPageListEditor</a>()
00023       {
00024       <span class="keywordflow">if</span> (<a class="code" href="classMuseScore.html#r31">pageListEdit</a> == 0) {
00025             <a class="code" href="classMuseScore.html#r31">pageListEdit</a> = <span class="keyword">new</span> <a class="code" href="classPageListEditor.html">PageListEditor</a>(<a class="code" href="classMuseScore.html#r0">cs</a>);
00026             }
00027       <a class="code" href="classMuseScore.html#r31">pageListEdit</a>-&gt;show();
00028       }
00029 
00030 <span class="comment">//---------------------------------------------------------</span>
00031 <span class="comment">//   startMeasureListEditor</span>
00032 <span class="comment">//---------------------------------------------------------</span>
00033 
<a name="l00034"></a><a class="code" href="classMuseScore.html#k13">00034</a> <span class="keywordtype">void</span> <a class="code" href="classMuseScore.html#k13">MuseScore::startMeasureListEditor</a>()
00035       {
00036       <span class="keywordflow">if</span> (<a class="code" href="classMuseScore.html#r32">measureListEdit</a> == 0) {
00037             <a class="code" href="classMuseScore.html#r32">measureListEdit</a> = <span class="keyword">new</span> <a class="code" href="classMeasureListEditor.html">MeasureListEditor</a>();
00038             }
00039       <a class="code" href="classMuseScore.html#r32">measureListEdit</a>-&gt;show();
00040       }
00041 
00042 <span class="comment">//---------------------------------------------------------</span>
00043 <span class="comment">//   MeasureListEditor</span>
00044 <span class="comment">//---------------------------------------------------------</span>
00045 
<a name="l00046"></a><a class="code" href="classMeasureListEditor.html#a0">00046</a> <a class="code" href="classMeasureListEditor.html#a0">MeasureListEditor::MeasureListEditor</a>()
00047    : QWidget()
00048       {
00049 
00050       }
00051 
00052 <span class="comment">//---------------------------------------------------------</span>
00053 <span class="comment">//   ElementItem</span>
00054 <span class="comment">//---------------------------------------------------------</span>
00055 
<a name="l00056"></a><a class="code" href="classElementItem.html">00056</a> <span class="keyword">class </span><a class="code" href="classElementItem.html">ElementItem</a> : <span class="keyword">public</span> Q3ListViewItem
00057       {
<a name="l00058"></a><a class="code" href="classElementItem.html#r0">00058</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classElementItem.html#r0">el</a>;
00059 
00060    <span class="keyword">public</span>:
<a name="l00061"></a><a class="code" href="classElementItem.html#a0">00061</a>       <a class="code" href="classElementItem.html">ElementItem</a>(Q3ListView* lv, <a class="code" href="classElement.html">Element</a>* e) : Q3ListViewItem(lv)   { <a class="code" href="classElementItem.html#r0">el</a> = e; }
<a name="l00062"></a><a class="code" href="classElementItem.html#a1">00062</a>       <a class="code" href="classElementItem.html">ElementItem</a>(<a class="code" href="classElementItem.html">ElementItem</a>* ei, <a class="code" href="classElement.html">Element</a>* e) : Q3ListViewItem(ei) { <a class="code" href="classElementItem.html#r0">el</a> = e; }
<a name="l00063"></a><a class="code" href="classElementItem.html#a2">00063</a>       <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classElementItem.html#a2">rtti</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classElementItem.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a40">type</a>(); }
<a name="l00064"></a><a class="code" href="classElementItem.html#a3">00064</a>       <a class="code" href="classElement.html">Element</a>* <a class="code" href="classElementItem.html#a3">element</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classElementItem.html#r0">el</a>; }
00065 
<a name="l00066"></a><a class="code" href="classElementItem.html#a4">00066</a>       <span class="keyword">virtual</span> QString <a class="code" href="classElementItem.html#a4">text</a>(<span class="keywordtype">int</span>)<span class="keyword"> const </span>{
00067             QString s;
00068             <span class="keywordflow">switch</span>(<a class="code" href="classElementItem.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a40">type</a>()) {
00069                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a32">PAGE</a>:
00070                         {
00071                         QString no;
00072                         no.setNum(((<a class="code" href="classPage.html">Page</a>*)<a class="code" href="classElementItem.html#r0">el</a>)-&gt;no());
00073                         s = <span class="stringliteral">"Page-"</span> + no;
00074                         }
00075                         <span class="keywordflow">break</span>;
00076                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a39">SYSTEM</a>:
00077                         s = <span class="stringliteral">"System"</span>;
00078                         <span class="keywordflow">break</span>;
00079                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a25">CHORD</a>:
00080                         s = <span class="stringliteral">"Chord"</span>;
00081                         <span class="keywordflow">break</span>;
00082                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a26">REST</a>:
00083                         s = <span class="stringliteral">"Rest"</span>;
00084                         <span class="keywordflow">break</span>;
00085                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a12">NOTE</a>:
00086                         s = <span class="stringliteral">"Note"</span>;
00087                         <span class="keywordflow">break</span>;
00088                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a29">MEASURE</a>:
00089                         {
00090                         QString no;
00091                         no.setNum(((<a class="code" href="classMeasure.html">Measure</a>*)<a class="code" href="classElementItem.html#r0">el</a>)-&gt;no()+1);
00092                         s = <span class="stringliteral">"Measure-"</span> + no;
00093                         }
00094                         <span class="keywordflow">break</span>;
00095                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a22">CLEF</a>:
00096                         s = <span class="stringliteral">"Clef"</span>;
00097                         <span class="keywordflow">break</span>;
00098                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a24">TIMESIG</a>:
00099                         s = <span class="stringliteral">"TimeSig"</span>;
00100                         <span class="keywordflow">break</span>;
00101                   <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a23">KEYSIG</a>:
00102                         s = <span class="stringliteral">"KeySig"</span>;
00103                         <span class="keywordflow">break</span>;
00104                   <span class="keywordflow">default</span>:
00105                         s = <span class="stringliteral">"??"</span>;
00106                   }
00107             <span class="keywordflow">return</span> s;
00108             }
00109       };
00110 
00111 
00112 <span class="comment">//---------------------------------------------------------</span>
00113 <span class="comment">//   PageListEditor</span>
00114 <span class="comment">//---------------------------------------------------------</span>
00115 
<a name="l00116"></a><a class="code" href="classPageListEditor.html#a0">00116</a> <a class="code" href="classPageListEditor.html#a0">PageListEditor::PageListEditor</a>(<a class="code" href="classScore.html">Score</a>* s)
00117    : QWidget()
00118       {
00119       <a class="code" href="classPageListEditor.html#r0">cs</a> = s;
00120       QHBoxLayout* hbox = <span class="keyword">new</span> QHBoxLayout(<span class="keyword">this</span>);
00121       hbox-&gt;setAutoAdd(<span class="keyword">true</span>);
00122 
00123       QSplitter* split = <span class="keyword">new</span> QSplitter(<span class="keyword">this</span>);
00124       Q3ListView* <a class="code" href="classstd_1_1list.html">list</a>  = <span class="keyword">new</span> Q3ListView(split);
00125       split-&gt;setResizeMode(list, QSplitter::Auto);
00126       list-&gt;setAllColumnsShowFocus(<span class="keyword">true</span>);
00127       list-&gt;setRootIsDecorated(<span class="keyword">true</span>);
00128       list-&gt;addColumn(<span class="stringliteral">"Element"</span>);
00129       list-&gt;setSorting(-1);
00130       list-&gt;setColumnWidthMode(0, Q3ListView::Maximum);
00131 
00132       <a class="code" href="classPageListEditor.html#r1">stack</a>         = <span class="keyword">new</span> Q3WidgetStack(split);
00133 
00134       <a class="code" href="classPageListEditor.html#r2">pagePanel</a>     = <span class="keyword">new</span> <a class="code" href="classShowPageWidget.html">ShowPageWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00135       <a class="code" href="classPageListEditor.html#r3">systemPanel</a>   = <span class="keyword">new</span> <a class="code" href="classShowSystemWidget.html">ShowSystemWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00136       <a class="code" href="classPageListEditor.html#r4">measurePanel</a>  = <span class="keyword">new</span> <a class="code" href="classShowMeasureWidget.html">ShowMeasureWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00137       <a class="code" href="classPageListEditor.html#r5">chordPanel</a>    = <span class="keyword">new</span> <a class="code" href="classShowChordWidget.html">ShowChordWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00138       <a class="code" href="classPageListEditor.html#r6">notePanel</a>     = <span class="keyword">new</span> <a class="code" href="classShowNoteWidget.html">ShowNoteWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00139       <a class="code" href="classPageListEditor.html#r7">restPanel</a>     = <span class="keyword">new</span> <a class="code" href="classShowRestWidget.html">ShowRestWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00140       <a class="code" href="classPageListEditor.html#r9">timesigPanel</a>  = <span class="keyword">new</span> <a class="code" href="classShowTimesigWidget.html">ShowTimesigWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00141       <a class="code" href="classPageListEditor.html#r10">keysigPanel</a>   = <span class="keyword">new</span> <a class="code" href="classShowKeysigWidget.html">ShowKeysigWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00142       <a class="code" href="classPageListEditor.html#r8">clefPanel</a>     = <span class="keyword">new</span> <a class="code" href="classShowClefWidget.html">ShowClefWidget</a>(<a class="code" href="classPageListEditor.html#r1">stack</a>);
00143 
00144       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r2">pagePanel</a>, <a class="code" href="element_8h.html#a65a32">PAGE</a>);
00145       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r3">systemPanel</a>, <a class="code" href="element_8h.html#a65a39">SYSTEM</a>);
00146       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r4">measurePanel</a>, <a class="code" href="element_8h.html#a65a29">MEASURE</a>);
00147       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r5">chordPanel</a>, <a class="code" href="element_8h.html#a65a25">CHORD</a>);
00148       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r6">notePanel</a>, <a class="code" href="element_8h.html#a65a12">NOTE</a>);
00149       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r7">restPanel</a>, <a class="code" href="element_8h.html#a65a26">REST</a>);
00150       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r9">timesigPanel</a>, <a class="code" href="element_8h.html#a65a24">TIMESIG</a>);
00151       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r10">keysigPanel</a>, <a class="code" href="element_8h.html#a65a23">KEYSIG</a>);
00152       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;addWidget(<a class="code" href="classPageListEditor.html#r8">clefPanel</a>, <a class="code" href="element_8h.html#a65a22">CLEF</a>);
00153 
00154       <a class="code" href="classPageList.html">PageList</a>* pl = <a class="code" href="classPageListEditor.html#r0">cs</a>-&gt;<a class="code" href="classScore.html#o12">pages</a>;
00155       <span class="keywordtype">int</span> tracks = <a class="code" href="classPageListEditor.html#r0">cs</a>-&gt;<a class="code" href="classScore.html#a6">nstaves</a>() * <a class="code" href="globals_8h.html#a3">VOICES</a>;
00156       <span class="keywordflow">for</span> (<a class="code" href="page_8h.html#a2">riPage</a> ip = pl-&gt;<a class="code" href="classpstl_1_1plist.html#a7">rbegin</a>(); ip != pl-&gt;<a class="code" href="classpstl_1_1plist.html#a8">rend</a>(); ++ip) {
00157             <a class="code" href="classPage.html">Page</a>* page = *ip;
00158             <a class="code" href="classElementItem.html">ElementItem</a>* pi = <span class="keyword">new</span> <a class="code" href="classElementItem.html">ElementItem</a>(list, page);
00159             <a class="code" href="classSystemList.html">SystemList</a>* sl = page-&gt;<a class="code" href="classPage.html#a4">systems</a>();
00160             <span class="keywordflow">for</span> (<a class="code" href="classpstl_1_1plist.html">riSystem</a> s = sl-&gt;<a class="code" href="classpstl_1_1plist.html#a7">rbegin</a>(); s != sl-&gt;<a class="code" href="classpstl_1_1plist.html#a8">rend</a>(); ++s) {
00161                   ElementItem* si = <span class="keyword">new</span> ElementItem(pi, *s);
00162                   <a class="code" href="classMeasureList.html">MeasureList</a>* ml = (*s)-&gt;measures();
00163                   <span class="keywordflow">for</span> (<a class="code" href="measure_8h.html#a10">riMeasure</a> im = ml-&gt;<a class="code" href="classpstl_1_1plist.html#a7">rbegin</a>(); im != ml-&gt;<a class="code" href="classpstl_1_1plist.html#a8">rend</a>(); ++im) {
00164                         <a class="code" href="classMeasure.html">Measure</a>* measure = *im;
00165                         ElementItem* mi = <span class="keyword">new</span> ElementItem(si, measure);
00166                         <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classSegment.html">Segment</a>* segment = measure-&gt;<a class="code" href="classMeasure.html#a29">last</a>(); segment; segment = segment-&gt;<a class="code" href="classSegment.html#a5">prev</a>()) {
00167                               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> track = tracks-1; track &gt;= 0; --track) {
00168                                     <a class="code" href="classElement.html">Element</a>* e = segment-&gt;<a class="code" href="classSegment.html#a8">element</a>(track);
00169                                     <span class="keywordflow">if</span> (!e)
00170                                           <span class="keywordflow">continue</span>;
00171                                     ElementItem* sei = <span class="keyword">new</span> ElementItem(mi, e);
00172                                     <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classElement.html#a40">type</a>() == <a class="code" href="element_8h.html#a65a25">CHORD</a>) {
00173                                           <a class="code" href="classNoteList.html">NoteList</a>* notes = ((<a class="code" href="classChord.html">Chord</a>*)e)-&gt;noteList();
00174                                           <span class="keywordflow">for</span> (<a class="code" href="note_8h.html#a2">riNote</a> in = notes-&gt;rbegin(); in != notes-&gt;rend(); ++in) {
00175                                                 <a class="code" href="classNote.html">Note</a>* note = in-&gt;second;
00176                                                 <span class="comment">/*ElementItem* ni =*/</span> <span class="keyword">new</span> ElementItem(sei, note);
00177                                                 }
00178                                           }
00179                                     }
00180                               }
00181                         }
00182                   }
00183             }
00184       connect(list, SIGNAL(currentChanged(Q3ListViewItem*)), SLOT(<a class="code" href="classPageListEditor.html#k0">itemChanged</a>(Q3ListViewItem*)));
00185       resize(500, 300);
00186       }
00187 
00188 <span class="comment">//---------------------------------------------------------</span>
00189 <span class="comment">//   itemChanged</span>
00190 <span class="comment">//---------------------------------------------------------</span>
00191 
<a name="l00192"></a><a class="code" href="classPageListEditor.html#k0">00192</a> <span class="keywordtype">void</span> <a class="code" href="classPageListEditor.html#k0">PageListEditor::itemChanged</a>(Q3ListViewItem* i)
00193       {
00194       <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>* ew = 0;
00195       <span class="keywordtype">int</span> type = i-&gt;rtti();
00196       <span class="keywordflow">switch</span>(type) {
00197             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a32">PAGE</a>:    ew = <a class="code" href="classPageListEditor.html#r2">pagePanel</a>;    <span class="keywordflow">break</span>;
00198             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a39">SYSTEM</a>:  ew = <a class="code" href="classPageListEditor.html#r3">systemPanel</a>;  <span class="keywordflow">break</span>;
00199             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a29">MEASURE</a>: ew = <a class="code" href="classPageListEditor.html#r4">measurePanel</a>; <span class="keywordflow">break</span>;
00200             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a25">CHORD</a>:   ew = <a class="code" href="classPageListEditor.html#r5">chordPanel</a>;   <span class="keywordflow">break</span>;
00201             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a12">NOTE</a>:    ew = <a class="code" href="classPageListEditor.html#r6">notePanel</a>;    <span class="keywordflow">break</span>;
00202             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a26">REST</a>:    ew = <a class="code" href="classPageListEditor.html#r7">restPanel</a>;    <span class="keywordflow">break</span>;
00203             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a22">CLEF</a>:    ew = <a class="code" href="classPageListEditor.html#r8">clefPanel</a>;    <span class="keywordflow">break</span>;
00204             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a24">TIMESIG</a>: ew = <a class="code" href="classPageListEditor.html#r9">timesigPanel</a>; <span class="keywordflow">break</span>;
00205             <span class="keywordflow">case</span> <a class="code" href="element_8h.html#a65a23">KEYSIG</a>:  ew = <a class="code" href="classPageListEditor.html#r10">keysigPanel</a>;  <span class="keywordflow">break</span>;
00206             <span class="keywordflow">default</span>:
00207                   printf(<span class="stringliteral">"PageListEditor: unsupportd %d\n"</span>, type);
00208                   <span class="keywordflow">return</span>;
00209             }
00210       ew-&gt;<a class="code" href="classShowElementWidget.html#a1">setElement</a>(((<a class="code" href="classElementItem.html">ElementItem</a>*)i)-&gt;element());
00211       <a class="code" href="classPageListEditor.html#r1">stack</a>-&gt;raiseWidget(type);
00212       }
00213 
00214 <span class="comment">//---------------------------------------------------------</span>
00215 <span class="comment">//   ShowPageWidget</span>
00216 <span class="comment">//---------------------------------------------------------</span>
00217 
<a name="l00218"></a><a class="code" href="classShowPageWidget.html#a0">00218</a> <a class="code" href="classShowPageWidget.html#a0">ShowPageWidget::ShowPageWidget</a>(QWidget* parent)
00219    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00220       {
00221       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00222       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00223       line-&gt;setLineWidth(1);
00224       layout-&gt;addWidget(line);
00225 
00226       QHBoxLayout* hb = <span class="keyword">new</span> QHBoxLayout;
00227       <a class="code" href="classShowPageWidget.html#r0">pageno</a> = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00228       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"PageNo.:"</span>), <span class="keyword">this</span>));
00229       hb-&gt;addWidget(<a class="code" href="classShowPageWidget.html#r0">pageno</a>);
00230       hb-&gt;addStretch(100);
00231 
00232       layout-&gt;addLayout(hb);
00233       layout-&gt;addStretch(100);
00234       }
00235 
00236 <span class="comment">//---------------------------------------------------------</span>
00237 <span class="comment">//   setElement</span>
00238 <span class="comment">//---------------------------------------------------------</span>
00239 
<a name="l00240"></a><a class="code" href="classShowPageWidget.html#a2">00240</a> <span class="keywordtype">void</span> <a class="code" href="classShowPageWidget.html#a2">ShowPageWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00241       {
00242       <a class="code" href="classPage.html">Page</a>* p = (<a class="code" href="classPage.html">Page</a>*)e;
00243       ShowElementWidget::setElement(e);
00244       <a class="code" href="classShowPageWidget.html#r0">pageno</a>-&gt;setValue(p-&gt;<a class="code" href="classPage.html#a7">no</a>());
00245       }
00246 
00247 <span class="comment">//---------------------------------------------------------</span>
00248 <span class="comment">//   ShowSystemWidget</span>
00249 <span class="comment">//---------------------------------------------------------</span>
00250 
<a name="l00251"></a><a class="code" href="classShowSystemWidget.html#a0">00251</a> <a class="code" href="classShowSystemWidget.html#a0">ShowSystemWidget::ShowSystemWidget</a>(QWidget* parent)
00252    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00253       {
00254       layout-&gt;addStretch(100);
00255       }
00256 
00257 <span class="comment">//---------------------------------------------------------</span>
00258 <span class="comment">//   ShowMeasureWidget</span>
00259 <span class="comment">//---------------------------------------------------------</span>
00260 
<a name="l00261"></a><a class="code" href="classShowMeasureWidget.html#a0">00261</a> <a class="code" href="classShowMeasureWidget.html#a0">ShowMeasureWidget::ShowMeasureWidget</a>(QWidget* parent)
00262    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00263       {
00264       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00265       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00266       line-&gt;setLineWidth(1);
00267       layout-&gt;addWidget(line);
00268 
00269       <a class="code" href="classShowMeasureWidget.html#r0">segments</a>        = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00270       <a class="code" href="classShowMeasureWidget.html#r1">staves</a>          = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00271       <a class="code" href="classShowMeasureWidget.html#r2">beams</a>           = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00272       <a class="code" href="classShowMeasureWidget.html#r3">tuplets</a>         = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00273       <a class="code" href="classShowMeasureWidget.html#r4">pageElements</a>    = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00274       <a class="code" href="classShowMeasureWidget.html#r5">measureNo</a>       = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00275       <a class="code" href="classShowMeasureWidget.html#r6">measureNoOffset</a> = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00276       <a class="code" href="classShowMeasureWidget.html#r7">userStretch</a>     = <span class="keyword">new</span> <a class="code" href="classDoubleLabel.html">DoubleLabel</a>(<span class="keyword">this</span>);
00277       <a class="code" href="classShowMeasureWidget.html#r8">lineBreak</a>       = <span class="keyword">new</span> QCheckBox(tr(<span class="stringliteral">"LineBreak"</span>), <span class="keyword">this</span>);
00278       <a class="code" href="classShowMeasureWidget.html#r9">pageBreak</a>       = <span class="keyword">new</span> QCheckBox(tr(<span class="stringliteral">"PageBreak"</span>), <span class="keyword">this</span>);
00279       <a class="code" href="classShowMeasureWidget.html#r10">irregular</a>       = <span class="keyword">new</span> QCheckBox(tr(<span class="stringliteral">"Irregular"</span>), <span class="keyword">this</span>);
00280 
00281       QGridLayout* hb = <span class="keyword">new</span> QGridLayout();
00282 
00283       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Segments:"</span>), <span class="keyword">this</span>),  0, 0);
00284       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r0">segments</a>,                           0, 1);
00285 
00286       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Staves:"</span>), <span class="keyword">this</span>),    0, 2);
00287       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r1">staves</a>,                             0, 3);
00288 
00289       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Beams:"</span>), <span class="keyword">this</span>),     0, 4);
00290       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r2">beams</a>,                              0, 5);
00291 
00292       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Tuplets:"</span>), <span class="keyword">this</span>),   1, 0);
00293       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r3">tuplets</a>,                            1, 1);
00294 
00295       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"PageElem:"</span>), <span class="keyword">this</span>),  1, 2);
00296       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r4">pageElements</a>,                       1, 3);
00297 
00298       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"MeasureNo:"</span>), <span class="keyword">this</span>), 1, 4);
00299       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r5">measureNo</a>,                          1, 5);
00300 
00301       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"NoOffset:"</span>), <span class="keyword">this</span>),  2, 0);
00302       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r6">measureNoOffset</a>,                    2, 1);
00303 
00304       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"U-Stretch:"</span>), <span class="keyword">this</span>), 2, 2);
00305       hb-&gt;addWidget(<a class="code" href="classShowMeasureWidget.html#r7">userStretch</a>,                        2, 2);
00306 
00307       hb-&gt;addMultiCellWidget(<a class="code" href="classShowMeasureWidget.html#r8">lineBreak</a>,    4, 4, 0, 1);
00308       hb-&gt;addMultiCellWidget(<a class="code" href="classShowMeasureWidget.html#r9">pageBreak</a>,    4, 4, 2, 3);
00309       hb-&gt;addMultiCellWidget(<a class="code" href="classShowMeasureWidget.html#r10">irregular</a>,    4, 4, 4, 5);
00310 
00311       layout-&gt;addLayout(hb);
00312       layout-&gt;addStretch(100);
00313       }
00314 
00315 <span class="comment">//---------------------------------------------------------</span>
00316 <span class="comment">//   setElement</span>
00317 <span class="comment">//---------------------------------------------------------</span>
00318 
<a name="l00319"></a><a class="code" href="classShowMeasureWidget.html#a2">00319</a> <span class="keywordtype">void</span> <a class="code" href="classShowMeasureWidget.html#a2">ShowMeasureWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00320       {
00321       <a class="code" href="classMeasure.html">Measure</a>* m = (<a class="code" href="classMeasure.html">Measure</a>*)e;
00322       ShowElementWidget::setElement(e);
00323 
00324       <a class="code" href="classShowMeasureWidget.html#r0">segments</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a25">size</a>());
00325       <a class="code" href="classShowMeasureWidget.html#r1">staves</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a10">staffList</a>()-&gt;size());
00326       <a class="code" href="classShowMeasureWidget.html#r2">beams</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a11">beamList</a>()-&gt;size());
00327       <a class="code" href="classShowMeasureWidget.html#r3">tuplets</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a12">tupletList</a>()-&gt;size());
00328       <a class="code" href="classShowMeasureWidget.html#r4">pageElements</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a13">pel</a>()-&gt;size());
00329       <a class="code" href="classShowMeasureWidget.html#r5">measureNo</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a15">no</a>());
00330       <a class="code" href="classShowMeasureWidget.html#r6">measureNoOffset</a>-&gt;setValue(m-&gt;<a class="code" href="classMeasure.html#a18">noOffset</a>());
00331       <a class="code" href="classShowMeasureWidget.html#r7">userStretch</a>-&gt;<a class="code" href="classDoubleLabel.html#a1">setValue</a>(m-&gt;<a class="code" href="classMeasure.html#a32">userStretch</a>());
00332       <a class="code" href="classShowMeasureWidget.html#r8">lineBreak</a>-&gt;setChecked(m-&gt;<a class="code" href="classMeasure.html#a33">lineBreak</a>());
00333       <a class="code" href="classShowMeasureWidget.html#r9">pageBreak</a>-&gt;setChecked(m-&gt;<a class="code" href="classMeasure.html#a34">pageBreak</a>());
00334       <a class="code" href="classShowMeasureWidget.html#r10">irregular</a>-&gt;setChecked(m-&gt;<a class="code" href="classMeasure.html#a16">irregular</a>());
00335       }
00336 
00337 <span class="comment">//---------------------------------------------------------</span>
00338 <span class="comment">//   ShowChordWidget</span>
00339 <span class="comment">//---------------------------------------------------------</span>
00340 
<a name="l00341"></a><a class="code" href="classShowChordWidget.html#a0">00341</a> <a class="code" href="classShowChordWidget.html#a0">ShowChordWidget::ShowChordWidget</a>(QWidget* parent)
00342    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00343       {
00344       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00345       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00346       line-&gt;setLineWidth(1);
00347       layout-&gt;addWidget(line);
00348 
00349       QHBoxLayout* hb = <span class="keyword">new</span> QHBoxLayout;
00350       <a class="code" href="classShowChordWidget.html#r0">segment</a> = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00351       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Segment:"</span>), <span class="keyword">this</span>));
00352       hb-&gt;addWidget(<a class="code" href="classShowChordWidget.html#r0">segment</a>);
00353       hb-&gt;addStretch(100);
00354       layout-&gt;addLayout(hb);
00355 
00356       layout-&gt;addStretch(100);
00357       }
00358 
00359 <span class="comment">//---------------------------------------------------------</span>
00360 <span class="comment">//   setElement</span>
00361 <span class="comment">//---------------------------------------------------------</span>
00362 
<a name="l00363"></a><a class="code" href="classShowChordWidget.html#a2">00363</a> <span class="keywordtype">void</span> <a class="code" href="classShowChordWidget.html#a2">ShowChordWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>*)
00364       {
00365 <span class="preprocessor">#if 0 // TODO</span>
00366 <span class="preprocessor"></span>      <a class="code" href="classChord.html">Chord</a>* chord = (<a class="code" href="classChord.html">Chord</a>*)e;
00367       ShowElementWidget::setElement(e);
00368 
00369       <a class="code" href="classMeasure.html">Measure</a>* m = chord-&gt;<a class="code" href="classChordRest.html#a11">measure</a>();
00370       <span class="keywordtype">int</span> seg = 0;
00371       <span class="keywordtype">int</span> tracks = cs-&gt;nstaves() * <a class="code" href="globals_8h.html#a3">VOICES</a>;
00372       <span class="keywordflow">for</span> (<a class="code" href="classSegment.html">Segment</a>* s = m-&gt;<a class="code" href="classMeasure.html#a28">first</a>(); s; s = s-&gt;<a class="code" href="classSegment.html#a4">next</a>(), ++seg) {
00373             <span class="keywordtype">int</span> track;
00374             <span class="keywordflow">for</span> (track = 0; track &lt; tracks; ++track) {
00375                   <a class="code" href="classElement.html">Element</a>* e = s-&gt;<a class="code" href="classSegment.html#a8">element</a>(track);
00376                   <span class="keywordflow">if</span> (e == chord)
00377                         <span class="keywordflow">break</span>;
00378                   }
00379             <span class="keywordflow">if</span> (track &lt; tracks)
00380                   <span class="keywordflow">break</span>;
00381             }
00382       <a class="code" href="classShowChordWidget.html#r0">segment</a>-&gt;setValue(seg);
00383 <span class="preprocessor">#endif</span>
00384 <span class="preprocessor"></span>      }
00385 
00386 <span class="comment">//---------------------------------------------------------</span>
00387 <span class="comment">//   ShowNoteWidget</span>
00388 <span class="comment">//---------------------------------------------------------</span>
00389 
<a name="l00390"></a><a class="code" href="classShowNoteWidget.html#a0">00390</a> <a class="code" href="classShowNoteWidget.html#a0">ShowNoteWidget::ShowNoteWidget</a>(QWidget* parent)
00391    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00392       {
00393       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00394       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00395       line-&gt;setLineWidth(1);
00396       layout-&gt;addWidget(line);
00397 
00398       QHBoxLayout* hb = <span class="keyword">new</span> QHBoxLayout;
00399       <a class="code" href="classShowNoteWidget.html#r0">segment</a> = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00400       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Segment:"</span>), <span class="keyword">this</span>));
00401       hb-&gt;addWidget(<a class="code" href="classShowNoteWidget.html#r0">segment</a>);
00402       hb-&gt;addStretch(100);
00403 
00404       layout-&gt;addLayout(hb);
00405       layout-&gt;addStretch(100);
00406       }
00407 
00408 <span class="comment">//---------------------------------------------------------</span>
00409 <span class="comment">//   setElement</span>
00410 <span class="comment">//---------------------------------------------------------</span>
00411 
<a name="l00412"></a><a class="code" href="classShowNoteWidget.html#a2">00412</a> <span class="keywordtype">void</span> <a class="code" href="classShowNoteWidget.html#a2">ShowNoteWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00413       {
00414       <a class="code" href="classNote.html">Note</a>* note = (<a class="code" href="classNote.html">Note</a>*)e;
00415       ShowElementWidget::setElement(e);
00416 
00417       <a class="code" href="classChord.html">Chord</a>* chord = note-&gt;<a class="code" href="classNote.html#a37">chord</a>();
00418       <a class="code" href="classMeasure.html">Measure</a>* m = chord-&gt;<a class="code" href="classChordRest.html#a11">measure</a>();
00419       <span class="keywordtype">int</span> seg = 0;
00420 <span class="comment">//TODO      int tracks = cs-&gt;nstaves() * VOICES;</span>
00421       <span class="keywordtype">int</span> tracks = 4;
00422       <span class="keywordflow">for</span> (<a class="code" href="classSegment.html">Segment</a>* s = m-&gt;<a class="code" href="classMeasure.html#a28">first</a>(); s; s = s-&gt;<a class="code" href="classSegment.html#a4">next</a>(), ++seg) {
00423             <span class="keywordtype">int</span> track;
00424             <span class="keywordflow">for</span> (track = 0; track &lt; tracks; ++track) {
00425                   <a class="code" href="classElement.html">Element</a>* e = s-&gt;<a class="code" href="classSegment.html#a8">element</a>(track);
00426                   <span class="keywordflow">if</span> (e == chord)
00427                         <span class="keywordflow">break</span>;
00428                   }
00429             <span class="keywordflow">if</span> (track &lt; tracks)
00430                   <span class="keywordflow">break</span>;
00431             }
00432       <a class="code" href="classShowNoteWidget.html#r0">segment</a>-&gt;setValue(seg);
00433       }
00434 
00435 <span class="comment">//---------------------------------------------------------</span>
00436 <span class="comment">//   ShowRestWidget</span>
00437 <span class="comment">//---------------------------------------------------------</span>
00438 
<a name="l00439"></a><a class="code" href="classShowRestWidget.html#a0">00439</a> <a class="code" href="classShowRestWidget.html#a0">ShowRestWidget::ShowRestWidget</a>(QWidget* parent)
00440    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00441       {
00442       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00443       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00444       line-&gt;setLineWidth(1);
00445       layout-&gt;addWidget(line);
00446 
00447       QHBoxLayout* hb = <span class="keyword">new</span> QHBoxLayout;
00448       <a class="code" href="classShowRestWidget.html#r0">segment</a> = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00449       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Segment:"</span>), <span class="keyword">this</span>));
00450       hb-&gt;addWidget(<a class="code" href="classShowRestWidget.html#r0">segment</a>);
00451       hb-&gt;addStretch(100);
00452 
00453       layout-&gt;addLayout(hb);
00454       layout-&gt;addStretch(100);
00455       }
00456 
00457 <span class="comment">//---------------------------------------------------------</span>
00458 <span class="comment">//   setElement</span>
00459 <span class="comment">//---------------------------------------------------------</span>
00460 
<a name="l00461"></a><a class="code" href="classShowRestWidget.html#a2">00461</a> <span class="keywordtype">void</span> <a class="code" href="classShowRestWidget.html#a2">ShowRestWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00462       {
00463       <a class="code" href="classRest.html">Rest</a>* rest = (<a class="code" href="classRest.html">Rest</a>*)e;
00464       ShowElementWidget::setElement(e);
00465 
00466       <a class="code" href="classMeasure.html">Measure</a>* m = rest-&gt;<a class="code" href="classChordRest.html#a11">measure</a>();
00467       <span class="keywordtype">int</span> seg = 0;
00468       <span class="keywordtype">int</span> tracks = 0; <span class="comment">// TODO cs-&gt;nstaves() * VOICES;</span>
00469       <span class="keywordflow">for</span> (<a class="code" href="classSegment.html">Segment</a>* s = m-&gt;<a class="code" href="classMeasure.html#a28">first</a>(); s; s = s-&gt;<a class="code" href="classSegment.html#a4">next</a>(), ++seg) {
00470             <span class="keywordtype">int</span> track;
00471             <span class="keywordflow">for</span> (track = 0; track &lt; tracks; ++track) {
00472                   <a class="code" href="classElement.html">Element</a>* e = s-&gt;<a class="code" href="classSegment.html#a8">element</a>(track);
00473                   <span class="keywordflow">if</span> (e == rest)
00474                         <span class="keywordflow">break</span>;
00475                   }
00476             <span class="keywordflow">if</span> (track &lt; tracks)
00477                   <span class="keywordflow">break</span>;
00478             }
00479       <a class="code" href="classShowRestWidget.html#r0">segment</a>-&gt;setValue(seg);
00480       }
00481 
00482 <span class="comment">//---------------------------------------------------------</span>
00483 <span class="comment">//   ShowClefWidget</span>
00484 <span class="comment">//---------------------------------------------------------</span>
00485 
<a name="l00486"></a><a class="code" href="classShowClefWidget.html#a0">00486</a> <a class="code" href="classShowClefWidget.html#a0">ShowClefWidget::ShowClefWidget</a>(QWidget* parent)
00487    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00488       {
00489       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00490       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00491       line-&gt;setLineWidth(1);
00492       layout-&gt;addWidget(line);
00493 
00494       QHBoxLayout* hb = <span class="keyword">new</span> QHBoxLayout;
00495       <a class="code" href="classShowClefWidget.html#r0">idx</a> = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00496       hb-&gt;addWidget(<span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Clef Type:"</span>), <span class="keyword">this</span>));
00497       hb-&gt;addWidget(<a class="code" href="classShowClefWidget.html#r0">idx</a>);
00498       hb-&gt;addStretch(100);
00499 
00500       layout-&gt;addLayout(hb);
00501       layout-&gt;addStretch(100);
00502       }
00503 
00504 <span class="comment">//---------------------------------------------------------</span>
00505 <span class="comment">//   setElement</span>
00506 <span class="comment">//---------------------------------------------------------</span>
00507 
<a name="l00508"></a><a class="code" href="classShowClefWidget.html#a2">00508</a> <span class="keywordtype">void</span> <a class="code" href="classShowClefWidget.html#a2">ShowClefWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00509       {
00510       <a class="code" href="classClef.html">Clef</a>* clef = (<a class="code" href="classClef.html">Clef</a>*)e;
00511       ShowElementWidget::setElement(e);
00512       <a class="code" href="classShowClefWidget.html#r0">idx</a>-&gt;setValue(clef-&gt;<a class="code" href="classClef.html#a5">idx</a>());
00513       }
00514 
00515 <span class="comment">//---------------------------------------------------------</span>
00516 <span class="comment">//   ShowTimesigWidget</span>
00517 <span class="comment">//---------------------------------------------------------</span>
00518 
<a name="l00519"></a><a class="code" href="classShowTimesigWidget.html#a0">00519</a> <a class="code" href="classShowTimesigWidget.html#a0">ShowTimesigWidget::ShowTimesigWidget</a>(QWidget* parent)
00520    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00521       {
00522       layout-&gt;addStretch(100);
00523       }
00524 
00525 <span class="comment">//---------------------------------------------------------</span>
00526 <span class="comment">//   setElement</span>
00527 <span class="comment">//---------------------------------------------------------</span>
00528 
<a name="l00529"></a><a class="code" href="classShowTimesigWidget.html#a2">00529</a> <span class="keywordtype">void</span> <a class="code" href="classShowTimesigWidget.html#a2">ShowTimesigWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00530       {
00531 <span class="comment">//      TimeSig* tsig = (TimeSig*)e;</span>
00532       ShowElementWidget::setElement(e);
00533       }
00534 
00535 <span class="comment">//---------------------------------------------------------</span>
00536 <span class="comment">//   ShowKeysigWidget</span>
00537 <span class="comment">//---------------------------------------------------------</span>
00538 
<a name="l00539"></a><a class="code" href="classShowKeysigWidget.html#a0">00539</a> <a class="code" href="classShowKeysigWidget.html#a0">ShowKeysigWidget::ShowKeysigWidget</a>(QWidget* parent)
00540    : <a class="code" href="classShowElementWidget.html">ShowElementWidget</a>(parent)
00541       {
00542       layout-&gt;addStretch(100);
00543       }
00544 
00545 <span class="comment">//---------------------------------------------------------</span>
00546 <span class="comment">//   setElement</span>
00547 <span class="comment">//---------------------------------------------------------</span>
00548 
<a name="l00549"></a><a class="code" href="classShowKeysigWidget.html#a2">00549</a> <span class="keywordtype">void</span> <a class="code" href="classShowKeysigWidget.html#a2">ShowKeysigWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00550       {
00551 <span class="comment">//      KeySig* tsig = (KeySig*)e;</span>
00552       ShowElementWidget::setElement(e);
00553       }
00554 
00555 <span class="comment">//---------------------------------------------------------</span>
00556 <span class="comment">//   ShowElementWidget</span>
00557 <span class="comment">//---------------------------------------------------------</span>
00558 
<a name="l00559"></a><a class="code" href="classShowElementWidget.html#a0">00559</a> <a class="code" href="classShowElementWidget.html#a0">ShowElementWidget::ShowElementWidget</a>(QWidget* parent)
00560    : QWidget(parent)
00561       {
00562       <a class="code" href="classShowElementWidget.html#r0">el</a> = 0;
00563       <a class="code" href="classShowElementWidget.html#p0">layout</a> = <span class="keyword">new</span> QVBoxLayout(<span class="keyword">this</span>, 6, -1, <span class="stringliteral">"layout"</span>);
00564       <a class="code" href="classShowElementWidget.html#r1">titel</a> = <span class="keyword">new</span> QLabel(<span class="keyword">this</span>);
00565       <a class="code" href="classShowElementWidget.html#r1">titel</a>-&gt;setTextFormat(Qt::RichText);
00566       <a class="code" href="classShowElementWidget.html#p0">layout</a>-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r1">titel</a>);
00567       Q3Frame* line = <span class="keyword">new</span> Q3Frame(<span class="keyword">this</span>);
00568       line-&gt;setFrameStyle(Q3Frame::HLine | Q3Frame::Raised);
00569       line-&gt;setLineWidth(1);
00570       <a class="code" href="classShowElementWidget.html#p0">layout</a>-&gt;addWidget(line);
00571 
00572       QHBoxLayout* hbox = <span class="keyword">new</span> QHBoxLayout(0, <span class="stringliteral">"hbox0"</span>);
00573       <a class="code" href="classShowElementWidget.html#r2">selected</a>  = <span class="keyword">new</span> QCheckBox(tr(<span class="stringliteral">"Selected"</span>), <span class="keyword">this</span>);
00574       <a class="code" href="classShowElementWidget.html#r3">generated</a> = <span class="keyword">new</span> QCheckBox(tr(<span class="stringliteral">"Generated"</span>), <span class="keyword">this</span>);
00575       <a class="code" href="classShowElementWidget.html#r4">visible</a>   = <span class="keyword">new</span> QCheckBox(tr(<span class="stringliteral">"Visible"</span>), <span class="keyword">this</span>);
00576       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r2">selected</a>);
00577       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r3">generated</a>);
00578       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r4">visible</a>);
00579       <a class="code" href="classShowElementWidget.html#p0">layout</a>-&gt;addLayout(hbox);
00580 
00581       hbox = <span class="keyword">new</span> QHBoxLayout(0, <span class="stringliteral">"hbox1"</span>);
00582       QLabel* l1 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Voice:"</span>), <span class="keyword">this</span>);
00583       <a class="code" href="classShowElementWidget.html#r5">voice</a>      = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00584       <a class="code" href="classShowElementWidget.html#r5">voice</a>-&gt;setRange(0, 3);
00585       QLabel* l2 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Staff:"</span>), <span class="keyword">this</span>);
00586       <a class="code" href="classShowElementWidget.html#r6">staff</a>      = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00587       <a class="code" href="classShowElementWidget.html#r6">staff</a>-&gt;setRange(0, 100);
00588       QLabel* l3 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Tick:"</span>), <span class="keyword">this</span>);
00589       <a class="code" href="classShowElementWidget.html#r7">tick</a>       = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00590       <a class="code" href="classShowElementWidget.html#r7">tick</a>-&gt;setRange(0, 2000000);
00591       QLabel* l4 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"len:"</span>), <span class="keyword">this</span>);
00592       <a class="code" href="classShowElementWidget.html#r8">tickLen</a>       = <span class="keyword">new</span> QSpinBox(<span class="keyword">this</span>);
00593       <a class="code" href="classShowElementWidget.html#r8">tickLen</a>-&gt;setRange(0, 2000000);
00594 
00595       hbox-&gt;addWidget(l1);
00596       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r5">voice</a>);
00597       hbox-&gt;addWidget(l2);
00598       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r6">staff</a>);
00599       hbox-&gt;addWidget(l3);
00600       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r7">tick</a>);
00601       hbox-&gt;addWidget(l4);
00602       hbox-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r8">tickLen</a>);
00603       <a class="code" href="classShowElementWidget.html#p0">layout</a>-&gt;addLayout(hbox);
00604 
00605       QGridLayout* grid = <span class="keyword">new</span> QGridLayout(0, 2, 8);
00606       QLabel* l13 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"Position x:"</span>), <span class="keyword">this</span>);
00607       <a class="code" href="classShowElementWidget.html#r9">xpos</a>       = <span class="keyword">new</span> <a class="code" href="classDoubleLabel.html">DoubleLabel</a>(<span class="keyword">this</span>);
00608       QLabel* l14 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"y:"</span>), <span class="keyword">this</span>);
00609       <a class="code" href="classShowElementWidget.html#r10">ypos</a>       = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00610       QLabel* l15 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"xoff:"</span>), <span class="keyword">this</span>);
00611       <a class="code" href="classShowElementWidget.html#r11">xoff</a>       = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00612       QLabel* l16 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"yoff:"</span>), <span class="keyword">this</span>);
00613       <a class="code" href="classShowElementWidget.html#r12">yoff</a>       = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00614       grid-&gt;addWidget(l13,   0, 0);
00615       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r9">xpos</a>, 0, 1);
00616       grid-&gt;addWidget(l14,   0, 2);
00617       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r10">ypos</a>, 0, 3);
00618       grid-&gt;addWidget(l15,   0, 4);
00619       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r11">xoff</a>, 0, 5);
00620       grid-&gt;addWidget(l16,   0, 6);
00621       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r12">yoff</a>, 0, 7);
00622 
00623       hbox = <span class="keyword">new</span> QHBoxLayout();
00624       QLabel* l7 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"bbox x:"</span>), <span class="keyword">this</span>);
00625       <a class="code" href="classShowElementWidget.html#r13">bbx</a>        = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00626       QLabel* l8 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"y:"</span>), <span class="keyword">this</span>);
00627       <a class="code" href="classShowElementWidget.html#r14">bby</a>        = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00628       QLabel* l9 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"w:"</span>), <span class="keyword">this</span>);
00629       <a class="code" href="classShowElementWidget.html#r15">bbw</a>        = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00630       QLabel* l10 = <span class="keyword">new</span> QLabel(tr(<span class="stringliteral">"h:"</span>), <span class="keyword">this</span>);
00631       <a class="code" href="classShowElementWidget.html#r16">bbh</a>        = <span class="keyword">new</span> DoubleLabel(<span class="keyword">this</span>);
00632       grid-&gt;addWidget(l7,  1, 0);
00633       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r13">bbx</a>, 1, 1);
00634       grid-&gt;addWidget(l8,  1, 2);
00635       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r14">bby</a>, 1, 3);
00636       grid-&gt;addWidget(l9,  1, 4);
00637       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r15">bbw</a>, 1, 5);
00638       grid-&gt;addWidget(l10, 1, 6);
00639       grid-&gt;addWidget(<a class="code" href="classShowElementWidget.html#r16">bbh</a>, 1, 7);
00640       <a class="code" href="classShowElementWidget.html#p0">layout</a>-&gt;addLayout(grid);
00641       }
00642 
00643 <span class="comment">//---------------------------------------------------------</span>
00644 <span class="comment">//   setElement</span>
00645 <span class="comment">//---------------------------------------------------------</span>
00646 
<a name="l00647"></a><a class="code" href="classShowElementWidget.html#a1">00647</a> <span class="keywordtype">void</span> <a class="code" href="classShowElementWidget.html#a1">ShowElementWidget::setElement</a>(<a class="code" href="classElement.html">Element</a>* e)
00648       {
00649       <a class="code" href="classShowElementWidget.html#r0">el</a> = e;
00650 
00651       QString s;
00652       s.sprintf(<span class="stringliteral">"&lt;b&gt;%s&lt;/b&gt;"</span>, <a class="code" href="classShowElementWidget.html#a3">type</a>().latin1());
00653       <a class="code" href="classShowElementWidget.html#r1">titel</a>-&gt;setText(s);
00654 
00655       <a class="code" href="classShowElementWidget.html#r2">selected</a>-&gt;setChecked(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a14">isSelected</a>());
00656       <a class="code" href="classShowElementWidget.html#r3">generated</a>-&gt;setChecked(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a18">generated</a>());
00657       <a class="code" href="classShowElementWidget.html#r4">visible</a>-&gt;setChecked(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a16">visible</a>());
00658       <a class="code" href="classShowElementWidget.html#r5">voice</a>-&gt;setValue(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a62">voice</a>());
00659       <a class="code" href="classShowElementWidget.html#r6">staff</a>-&gt;setValue(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a60">staffIdx</a>());
00660       <a class="code" href="classShowElementWidget.html#r7">tick</a>-&gt;setValue(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a74">tick</a>());
00661       <a class="code" href="classShowElementWidget.html#r8">tickLen</a>-&gt;setValue(<a class="code" href="classShowElementWidget.html#r0">el</a>-&gt;<a class="code" href="classElement.html#a76">tickLen</a>());
00662       <a class="code" href="classShowElementWidget.html#r9">xpos</a>-&gt;setText(s.setNum(e-&gt;pos().x(), <span class="charliteral">'g'</span>, 3));
00663       <a class="code" href="classShowElementWidget.html#r10">ypos</a>-&gt;setText(s.setNum(e-&gt;pos().y(), <span class="charliteral">'g'</span>, 3));
00664       <a class="code" href="classShowElementWidget.html#r11">xoff</a>-&gt;setText(s.setNum(e-&gt;userOff().x(), <span class="charliteral">'g'</span>, 3));
00665       <a class="code" href="classShowElementWidget.html#r12">yoff</a>-&gt;setText(s.setNum(e-&gt;userOff().y(), <span class="charliteral">'g'</span>, 3));
00666       <a class="code" href="classShowElementWidget.html#r13">bbx</a>-&gt;setText(s.setNum(e-&gt;bbox().x(), <span class="charliteral">'g'</span>, 3));
00667       <a class="code" href="classShowElementWidget.html#r14">bby</a>-&gt;setText(s.setNum(e-&gt;bbox().y(), <span class="charliteral">'g'</span>, 3));
00668       <a class="code" href="classShowElementWidget.html#r15">bbw</a>-&gt;setText(s.setNum(e-&gt;bbox().width(), <span class="charliteral">'g'</span>, 3));
00669       <a class="code" href="classShowElementWidget.html#r16">bbh</a>-&gt;setText(s.setNum(e-&gt;bbox().height(), <span class="charliteral">'g'</span>, 3));
00670       }
00671 
00672 <span class="comment">//---------------------------------------------------------</span>
00673 <span class="comment">//   DoubleLabel</span>
00674 <span class="comment">//---------------------------------------------------------</span>
00675 
<a name="l00676"></a><a class="code" href="classDoubleLabel.html#a0">00676</a> <a class="code" href="classDoubleLabel.html#a0">DoubleLabel::DoubleLabel</a>(QWidget* parent, <span class="keyword">const</span> <span class="keywordtype">char</span>* name)
00677    : QLabel(parent, name)
00678       {
00679       setFrameStyle(Q3Frame::LineEditPanel | Q3Frame::Sunken);
00680       setPaletteBackgroundColor(palette().active().brightText());
00681       }
00682 
00683 <span class="comment">//---------------------------------------------------------</span>
00684 <span class="comment">//   setValue</span>
00685 <span class="comment">//---------------------------------------------------------</span>
00686 
<a name="l00687"></a><a class="code" href="classDoubleLabel.html#a1">00687</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleLabel.html#a1">DoubleLabel::setValue</a>(<span class="keywordtype">double</span> val)
00688       {
00689       QString s;
00690       setText(s.setNum(val, <span class="charliteral">'g'</span>, 3));
00691       }
00692 
00693 <span class="comment">//---------------------------------------------------------</span>
00694 <span class="comment">//   sizeHint</span>
00695 <span class="comment">//---------------------------------------------------------</span>
00696 
<a name="l00697"></a><a class="code" href="classDoubleLabel.html#a2">00697</a> QSize <a class="code" href="classDoubleLabel.html#a2">DoubleLabel::sizeHint</a>()<span class="keyword"> const</span>
00698 <span class="keyword">      </span>{
00699       QFontMetrics fm = fontMetrics();
00700       <span class="keywordtype">int</span> h           = fm.height() + 4;
00701       <span class="keywordtype">int</span> n           = 3 + 3;
00702       <span class="keywordtype">int</span> w = fm.width(QString(<span class="stringliteral">"-0."</span>)) + fm.width(<span class="charliteral">'0'</span>) * n + 6;
00703       <span class="keywordflow">return</span> QSize(w, h);
00704       }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:28 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
