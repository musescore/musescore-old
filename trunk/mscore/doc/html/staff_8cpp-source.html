<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MuseScore: staff.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>staff.cpp</h1><a href="staff_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">//=========================================================</span>
00002 <span class="comment">//  MusE Score</span>
00003 <span class="comment">//  Linux Music Score Editor</span>
00004 <span class="comment">//  $Id: staff.cpp,v 1.4 2005/04/15 16:14:37 wschweer Exp $</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//  (C) Copyright 2002-2004 Werner Schweer (ws@seh.de)</span>
00007 <span class="comment">//=========================================================</span>
00008 
00009 <span class="preprocessor">#include "<a class="code" href="staff_8h.html">staff.h</a>"</span>
00010 <span class="preprocessor">#include "<a class="code" href="part_8h.html">part.h</a>"</span>
00011 <span class="preprocessor">#include "<a class="code" href="clef_8h.html">clef.h</a>"</span>
00012 <span class="preprocessor">#include "<a class="code" href="xml_8h.html">xml.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="project_8h.html">project.h</a>"</span>
00014 
00015 <span class="comment">//---------------------------------------------------------</span>
00016 <span class="comment">//   isTopSplit</span>
00017 <span class="comment">//---------------------------------------------------------</span>
00018 
<a name="l00019"></a><a class="code" href="classStaff.html#a5">00019</a> <span class="keywordtype">bool</span> <a class="code" href="classStaff.html#a5">Staff::isTopSplit</a>()<span class="keyword"> const</span>
00020 <span class="keyword">      </span>{
00021       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a4">nstaves</a>() &gt; 1 &amp;&amp; <a class="code" href="classStaff.html#a4">isTop</a>();
00022       }
00023 
00024 <span class="comment">//---------------------------------------------------------</span>
00025 <span class="comment">//   trackName</span>
00026 <span class="comment">//---------------------------------------------------------</span>
00027 
<a name="l00028"></a><a class="code" href="classStaff.html#a6">00028</a> QString <a class="code" href="classStaff.html#a6">Staff::trackName</a>()<span class="keyword"> const</span>
00029 <span class="keyword">      </span>{
00030       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a11">trackName</a>();
00031       }
00032 
00033 <span class="comment">//---------------------------------------------------------</span>
00034 <span class="comment">//   longName</span>
00035 <span class="comment">//---------------------------------------------------------</span>
00036 
<a name="l00037"></a><a class="code" href="classStaff.html#a7">00037</a> QString <a class="code" href="classStaff.html#a7">Staff::longName</a>()<span class="keyword"> const</span>
00038 <span class="keyword">      </span>{
00039       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a10">longName</a>();
00040       }
00041 
00042 <span class="comment">//---------------------------------------------------------</span>
00043 <span class="comment">//   shortName</span>
00044 <span class="comment">//---------------------------------------------------------</span>
00045 
<a name="l00046"></a><a class="code" href="classStaff.html#a8">00046</a> QString <a class="code" href="classStaff.html#a8">Staff::shortName</a>()<span class="keyword"> const</span>
00047 <span class="keyword">      </span>{
00048       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a9">shortName</a>();
00049       }
00050 
00051 <span class="comment">//---------------------------------------------------------</span>
00052 <span class="comment">//   midiChannel</span>
00053 <span class="comment">//---------------------------------------------------------</span>
00054 
<a name="l00055"></a><a class="code" href="classStaff.html#a9">00055</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a9">Staff::midiChannel</a>()<span class="keyword"> const</span>
00056 <span class="keyword">      </span>{
00057       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a20">midiChannel</a>();
00058       }
00059 
00060 <span class="comment">//---------------------------------------------------------</span>
00061 <span class="comment">//   midiProgram</span>
00062 <span class="comment">//---------------------------------------------------------</span>
00063 
<a name="l00064"></a><a class="code" href="classStaff.html#a10">00064</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a10">Staff::midiProgram</a>()<span class="keyword"> const</span>
00065 <span class="keyword">      </span>{
00066       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a21">midiProgram</a>();
00067       }
00068 
00069 <span class="comment">//---------------------------------------------------------</span>
00070 <span class="comment">//   volume</span>
00071 <span class="comment">//---------------------------------------------------------</span>
00072 
<a name="l00073"></a><a class="code" href="classStaff.html#a11">00073</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a11">Staff::volume</a>()<span class="keyword"> const</span>
00074 <span class="keyword">      </span>{
00075       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a24">volume</a>();
00076       }
00077 
00078 <span class="comment">//---------------------------------------------------------</span>
00079 <span class="comment">//   reverb</span>
00080 <span class="comment">//---------------------------------------------------------</span>
00081 
<a name="l00082"></a><a class="code" href="classStaff.html#a12">00082</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a12">Staff::reverb</a>()<span class="keyword"> const</span>
00083 <span class="keyword">      </span>{
00084       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a25">reverb</a>();
00085       }
00086 
00087 <span class="comment">//---------------------------------------------------------</span>
00088 <span class="comment">//   chorus</span>
00089 <span class="comment">//---------------------------------------------------------</span>
00090 
<a name="l00091"></a><a class="code" href="classStaff.html#a13">00091</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a13">Staff::chorus</a>()<span class="keyword"> const</span>
00092 <span class="keyword">      </span>{
00093       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r1">_part</a>-&gt;<a class="code" href="classPart.html#a26">chorus</a>();
00094       }
00095 
00096 <span class="comment">//---------------------------------------------------------</span>
00097 <span class="comment">//   Staff</span>
00098 <span class="comment">//---------------------------------------------------------</span>
00099 
<a name="l00100"></a><a class="code" href="classStaff.html#a0">00100</a> <a class="code" href="classStaff.html#a0">Staff::Staff</a>(<a class="code" href="classScore.html">Score</a>* s, <a class="code" href="classPart.html">Part</a>* p, <span class="keywordtype">int</span> rs)
00101       {
00102       <a class="code" href="classStaff.html#r0">_score</a>  = s;
00103       <a class="code" href="classStaff.html#r2">_rstaff</a> = rs;
00104       <a class="code" href="classStaff.html#r1">_part</a>   = p;
00105       <a class="code" href="classStaff.html#r3">_clef</a>   = <span class="keyword">new</span> <a class="code" href="classClefList.html">ClefList</a>;
00106       }
00107 
00108 <span class="comment">//---------------------------------------------------------</span>
00109 <span class="comment">//   ~Staff</span>
00110 <span class="comment">//---------------------------------------------------------</span>
00111 
<a name="l00112"></a><a class="code" href="classStaff.html#a1">00112</a> <a class="code" href="classStaff.html#a1">Staff::~Staff</a>()
00113       {
00114       <span class="keyword">delete</span> <a class="code" href="classStaff.html#r3">_clef</a>;
00115       }
00116 
00117 <span class="comment">//---------------------------------------------------------</span>
00118 <span class="comment">//   Staff::key</span>
00119 <span class="comment">//---------------------------------------------------------</span>
00120 
<a name="l00121"></a><a class="code" href="classStaff.html#a3">00121</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a3">Staff::key</a>(<span class="keywordtype">int</span> tick)<span class="keyword"> const</span>
00122 <span class="keyword">      </span>{
00123       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r3">_clef</a>-&gt;<a class="code" href="classClefList.html#a1">clef</a>(tick);
00124       }
00125 
00126 <span class="comment">//---------------------------------------------------------</span>
00127 <span class="comment">//   write</span>
00128 <span class="comment">//---------------------------------------------------------</span>
00129 
<a name="l00130"></a><a class="code" href="classStaff.html#a18">00130</a> <span class="keywordtype">void</span> <a class="code" href="classStaff.html#a18">Staff::write</a>(<a class="code" href="classXml.html">Xml</a>&amp; xml)<span class="keyword"> const</span>
00131 <span class="keyword">      </span>{
00132       xml.<a class="code" href="classXml.html#a8">tag</a>(<span class="stringliteral">"Staff"</span>);
00133       <a class="code" href="classStaff.html#r3">_clef</a>-&gt;<a class="code" href="classClefList.html#a5">write</a>(xml, <span class="stringliteral">"cleflist"</span>);
00134       xml.<a class="code" href="classXml.html#a9">etag</a>(<span class="stringliteral">"Staff"</span>);
00135       }
00136 
00137 <span class="comment">//---------------------------------------------------------</span>
00138 <span class="comment">//   idx</span>
00139 <span class="comment">//---------------------------------------------------------</span>
00140 
<a name="l00141"></a><a class="code" href="classStaff.html#a15">00141</a> <span class="keywordtype">int</span> <a class="code" href="classStaff.html#a15">Staff::idx</a>()<span class="keyword"> const</span>
00142 <span class="keyword">      </span>{
00143       <span class="keywordflow">return</span> <a class="code" href="classStaff.html#r0">_score</a>-&gt;<a class="code" href="classScore.html#a5">staves</a>()-&gt;<a class="code" href="classStaffList.html#a1">idx</a>(<span class="keyword">this</span>);
00144       }
00145 
00146 <span class="comment">//---------------------------------------------------------</span>
00147 <span class="comment">//   read</span>
00148 <span class="comment">//---------------------------------------------------------</span>
00149 
<a name="l00150"></a><a class="code" href="classStaff.html#a17">00150</a> <span class="keywordtype">void</span> <a class="code" href="classStaff.html#a17">Staff::read</a>(QDomNode node)
00151       {
00152       <span class="keywordflow">for</span> (node = node.firstChild(); !node.isNull(); node = node.nextSibling()) {
00153             QDomElement e = node.toElement();
00154             QString tag(e.tagName());
00155             <span class="keywordflow">if</span> (tag == <span class="stringliteral">"cleflist"</span>) {
00156                   <a class="code" href="classStaff.html#r3">_clef</a>-&gt;<a class="code" href="classClefList.html#a3">read</a>(node);
00157                   }
00158             <span class="keywordflow">else</span>
00159                   printf(<span class="stringliteral">"Mscore:Staff: unknown tag %s\n"</span>, tag.latin1());
00160             }
00161       }
00162 
00163 <span class="comment">//---------------------------------------------------------</span>
00164 <span class="comment">//   remove</span>
00165 <span class="comment">//---------------------------------------------------------</span>
00166 
<a name="l00167"></a><a class="code" href="classStaffList.html#a0">00167</a> <span class="keywordtype">void</span> <a class="code" href="classStaffList.html#a0">StaffList::remove</a>(<a class="code" href="classStaff.html">Staff</a>* p)
00168       {
00169       <span class="keywordflow">for</span> (<a class="code" href="staff_8h.html#a0">iStaff</a> i = begin(); i != end(); ++i) {
00170             <span class="keywordflow">if</span> (*i == p) {
00171                   erase(i);
00172                   <span class="keywordflow">return</span>;
00173                   }
00174             }
00175       printf(<span class="stringliteral">"StaffList::remove(%p): not found\n"</span>, p);
00176       }
00177 
00178 <span class="comment">//---------------------------------------------------------</span>
00179 <span class="comment">//   idx</span>
00180 <span class="comment">//    TODO: optimize for std::vector</span>
00181 <span class="comment">//          is there a STL function?</span>
00182 <span class="comment">//---------------------------------------------------------</span>
00183 
<a name="l00184"></a><a class="code" href="classStaffList.html#a1">00184</a> <span class="keywordtype">int</span> <a class="code" href="classStaffList.html#a1">StaffList::idx</a>(<span class="keyword">const</span> <a class="code" href="classStaff.html">Staff</a>* p)<span class="keyword"> const</span>
00185 <span class="keyword">      </span>{
00186       <span class="keywordtype">int</span> <a class="code" href="classStaffList.html#a1">idx</a> = 0;
00187       <span class="keywordflow">for</span> (<a class="code" href="staff_8h.html#a1">ciStaff</a> i = begin(); i != end(); ++i, ++idx) {
00188             <span class="keywordflow">if</span> (*i == p)
00189                   <span class="keywordflow">return</span> idx;
00190             }
00191       printf(<span class="stringliteral">"StaffList::idx(%p): not found\n"</span>, p);
00192       <span class="keywordflow">return</span> -1;
00193       }
00194 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Jun 27 22:28:29 2005 for MuseScore by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
